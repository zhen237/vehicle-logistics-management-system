import{c as e,I as ne,_ as de,r as y,a7 as ue,o as ie,a as w,b as _,k as l,g as r,aA as B,w as a,C as re,d as me,e as h,f as pe,aj as ce,j as _e,U as fe,V as ve,B as ye,ak as Te,a2 as Pe,P as A,S as Ee,ax as Me,aO as ge,aP as Re,s as be,t as u,aQ as xe,aR as Oe,G as he,H as ke,J as Se,p as Ie,q as we,af as Ce,T as De,av as Ge,aN as Ue,K as g,a8 as Ke}from"./index-Dk-eNI3p.js";var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};function H(f){for(var i=1;i<arguments.length;i++){var p=arguments[i]!=null?Object(arguments[i]):{},T=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(T=T.concat(Object.getOwnPropertySymbols(p).filter(function(E){return Object.getOwnPropertyDescriptor(p,E).enumerable}))),T.forEach(function(E){je(f,E,p[E])})}return f}function je(f,i,p){return i in f?Object.defineProperty(f,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[i]=p,f}var C=function(i,p){var T=H({},i,p.attrs);return e(ne,H({},T,{icon:$e}),null)};C.displayName="MenuOutlined";C.inheritAttrs=!1;const ze={class:"permission-management"},Be={class:"page-header"},Ae={class:"tree-node"},He={class:"node-name"},Ne={class:"node-code"},Ve={key:0,class:"permission-detail"},Ye={class:"permission-header"},qe={class:"permission-info"},Le={class:"permission-info-detail"},Fe={class:"permission-actions"},Je={key:1,class:"no-selection"},Qe={__name:"Permissions",setup(f){const i=y(""),p=y(""),T=y(""),E=y(!1),x=y(["PERM001","PERM002","PERM003","PERM004","PERM005","PERM006","PERM007"]),D=y([]),o=y(null),k=y([{id:"PERM001",name:"系统管理",code:"system",description:"系统管理模块",module:"系统管理",type:"菜单权限",resource:"/system",method:"GET",sort:1,parentId:null,createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00",children:[{id:"PERM001001",name:"用户管理",code:"system:user",description:"用户管理页面",module:"系统管理",type:"菜单权限",resource:"/system/users",method:"GET",sort:1,parentId:"PERM001",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00",children:[{id:"PERM001001001",name:"新增用户",code:"system:user:add",description:"新增用户操作",module:"系统管理",type:"操作权限",resource:"/api/users",method:"POST",sort:1,parentId:"PERM001001",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"},{id:"PERM001001002",name:"编辑用户",code:"system:user:edit",description:"编辑用户操作",module:"系统管理",type:"操作权限",resource:"/api/users/*",method:"PUT",sort:2,parentId:"PERM001001",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"},{id:"PERM001001003",name:"删除用户",code:"system:user:delete",description:"删除用户操作",module:"系统管理",type:"操作权限",resource:"/api/users/*",method:"DELETE",sort:3,parentId:"PERM001001",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"}]},{id:"PERM001002",name:"角色管理",code:"system:role",description:"角色管理页面",module:"系统管理",type:"菜单权限",resource:"/system/roles",method:"GET",sort:2,parentId:"PERM001",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00",children:[{id:"PERM001002001",name:"新增角色",code:"system:role:add",description:"新增角色操作",module:"系统管理",type:"操作权限",resource:"/api/roles",method:"POST",sort:1,parentId:"PERM001002",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"},{id:"PERM001002002",name:"配置权限",code:"system:role:permission",description:"配置角色权限",module:"系统管理",type:"操作权限",resource:"/api/roles/*/permissions",method:"PUT",sort:2,parentId:"PERM001002",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"}]}]},{id:"PERM002",name:"数据管理",code:"data",description:"数据管理模块",module:"数据管理",type:"菜单权限",resource:"/data",method:"GET",sort:2,parentId:null,createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00",children:[{id:"PERM002001",name:"订单管理",code:"data:order",description:"订单数据管理",module:"数据管理",type:"菜单权限",resource:"/data/orders",method:"GET",sort:1,parentId:"PERM002",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"},{id:"PERM002002",name:"客户管理",code:"data:customer",description:"客户数据管理",module:"数据管理",type:"菜单权限",resource:"/data/customers",method:"GET",sort:2,parentId:"PERM002",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"}]},{id:"PERM003",name:"车辆管理",code:"vehicle",description:"车辆管理模块",module:"车辆管理",type:"菜单权限",resource:"/vehicle",method:"GET",sort:3,parentId:null,createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00",children:[{id:"PERM003001",name:"车辆档案",code:"vehicle:list",description:"车辆档案管理",module:"车辆管理",type:"菜单权限",resource:"/vehicle/list",method:"GET",sort:1,parentId:"PERM003",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"},{id:"PERM003002",name:"维修记录",code:"vehicle:maintenance",description:"车辆维修记录",module:"车辆管理",type:"菜单权限",resource:"/vehicle/maintenance",method:"GET",sort:2,parentId:"PERM003",createTime:"2024-01-01 00:00:00",updateTime:"2024-01-01 00:00:00"}]}]),R=y({total:0,menu:0,operation:0,data:0}),N=()=>{const s=[],t=m=>{m.forEach(n=>{s.push(n),n.children&&t(n.children)})};t(k.value),R.value={total:s.length,menu:s.filter(m=>m.type==="菜单权限").length,operation:s.filter(m=>m.type==="操作权限").length,data:s.filter(m=>m.type==="数据权限").length}},V=ue(()=>k.value),G=s=>({菜单权限:"blue",操作权限:"green",数据权限:"orange"})[s]||"default",U=s=>s?Ke(s).format("YYYY-MM-DD HH:mm"):"-",Y=s=>{i.value=s},K=()=>{},q=()=>{E.value=!0,setTimeout(()=>{E.value=!1,g.success("数据已刷新")},1e3)},L=()=>{g.success("权限数据导出成功")},F=()=>{g.info("打开新增权限弹窗")},J=()=>{const s=t=>{const m=[];return t.forEach(n=>{m.push(n.id),n.children&&m.push(...s(n.children))}),m};x.value=s(k.value)},Q=()=>{x.value=[]},W=(s,{node:t})=>{s.length>0?o.value=t:o.value=null},X=s=>{g.info(`编辑权限: ${s.name}`)},Z=s=>{g.info(`查看权限关联角色: ${s.name}`)},ee=s=>{g.info(`查看权限关联用户: ${s.name}`)},te=s=>{g.info(`为权限 ${s.name} 添加子权限`)};return ie(()=>{N()}),(s,t)=>{const m=ce,n=pe,c=ve,$=fe,b=_e,v=ye,S=me,M=re,O=Ee,I=be,ae=Re,j=he,P=Se,le=ke,se=Ue;return h(),w("div",ze,[_("div",Be,[_("h1",null,[e(r(B)),t[9]||(t[9]=l(" 权限管理 "))]),t[10]||(t[10]=_("p",null,"管理系统权限，配置访问控制，确保数据安全和操作规范",-1))]),e(M,{class:"toolbar-card"},{default:a(()=>[e(S,{gutter:[16,16],align:"middle"},{default:a(()=>[e(n,{xs:24,sm:12,md:8},{default:a(()=>[e(m,{value:i.value,"onUpdate:value":t[0]||(t[0]=d=>i.value=d),placeholder:"搜索权限名称、编码",onSearch:Y,style:{width:"100%"}},null,8,["value"])]),_:1}),e(n,{xs:24,sm:12,md:8},{default:a(()=>[e(b,null,{default:a(()=>[e($,{value:p.value,"onUpdate:value":t[1]||(t[1]=d=>p.value=d),placeholder:"功能模块",style:{width:"120px"},onChange:K},{default:a(()=>[e(c,{value:""},{default:a(()=>t[11]||(t[11]=[l("全部模块")])),_:1,__:[11]}),e(c,{value:"系统管理"},{default:a(()=>t[12]||(t[12]=[l("系统管理")])),_:1,__:[12]}),e(c,{value:"用户管理"},{default:a(()=>t[13]||(t[13]=[l("用户管理")])),_:1,__:[13]}),e(c,{value:"数据管理"},{default:a(()=>t[14]||(t[14]=[l("数据管理")])),_:1,__:[14]}),e(c,{value:"业务管理"},{default:a(()=>t[15]||(t[15]=[l("业务管理")])),_:1,__:[15]}),e(c,{value:"车辆管理"},{default:a(()=>t[16]||(t[16]=[l("车辆管理")])),_:1,__:[16]}),e(c,{value:"调度管理"},{default:a(()=>t[17]||(t[17]=[l("调度管理")])),_:1,__:[17]}),e(c,{value:"员工管理"},{default:a(()=>t[18]||(t[18]=[l("员工管理")])),_:1,__:[18]})]),_:1},8,["value"]),e($,{value:T.value,"onUpdate:value":t[2]||(t[2]=d=>T.value=d),placeholder:"权限类型",style:{width:"120px"},onChange:K},{default:a(()=>[e(c,{value:""},{default:a(()=>t[19]||(t[19]=[l("全部类型")])),_:1,__:[19]}),e(c,{value:"菜单权限"},{default:a(()=>t[20]||(t[20]=[l("菜单权限")])),_:1,__:[20]}),e(c,{value:"操作权限"},{default:a(()=>t[21]||(t[21]=[l("操作权限")])),_:1,__:[21]}),e(c,{value:"数据权限"},{default:a(()=>t[22]||(t[22]=[l("数据权限")])),_:1,__:[22]})]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,sm:24,md:8,class:"text-right"},{default:a(()=>[e(b,null,{default:a(()=>[e(v,{onClick:q},{default:a(()=>[e(r(Te)),t[23]||(t[23]=l(" 刷新 "))]),_:1,__:[23]}),e(v,{onClick:L},{default:a(()=>[e(r(Pe)),t[24]||(t[24]=l(" 导出 "))]),_:1,__:[24]}),e(v,{type:"primary",onClick:F},{default:a(()=>[e(r(A)),t[25]||(t[25]=l(" 新增权限 "))]),_:1,__:[25]})]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{gutter:[16,16],class:"stats-cards"},{default:a(()=>[e(n,{xs:24,sm:12,md:6},{default:a(()=>[e(M,{class:"stat-card"},{default:a(()=>[e(O,{title:"总权限数",value:R.value.total,"value-style":{color:"#1890ff"}},{prefix:a(()=>[e(r(B))]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:6},{default:a(()=>[e(M,{class:"stat-card"},{default:a(()=>[e(O,{title:"菜单权限",value:R.value.menu,"value-style":{color:"#52c41a"}},{prefix:a(()=>[e(r(C))]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:6},{default:a(()=>[e(M,{class:"stat-card"},{default:a(()=>[e(O,{title:"操作权限",value:R.value.operation,"value-style":{color:"#722ed1"}},{prefix:a(()=>[e(r(Me))]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:6},{default:a(()=>[e(M,{class:"stat-card"},{default:a(()=>[e(O,{title:"数据权限",value:R.value.data,"value-style":{color:"#fa8c16"}},{prefix:a(()=>[e(r(ge))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(S,{gutter:[16,16]},{default:a(()=>[e(n,{xs:24,lg:12},{default:a(()=>[e(M,{title:"权限树形结构",class:"permission-tree-card"},{extra:a(()=>[e(b,null,{default:a(()=>[e(v,{size:"small",onClick:J},{default:a(()=>[e(r(xe)),t[26]||(t[26]=l(" 展开全部 "))]),_:1,__:[26]}),e(v,{size:"small",onClick:Q},{default:a(()=>[e(r(Oe)),t[27]||(t[27]=l(" 收起全部 "))]),_:1,__:[27]})]),_:1})]),default:a(()=>[e(ae,{expandedKeys:x.value,"onUpdate:expandedKeys":t[3]||(t[3]=d=>x.value=d),selectedKeys:D.value,"onUpdate:selectedKeys":t[4]||(t[4]=d=>D.value=d),"tree-data":V.value,"field-names":{children:"children",title:"name",key:"id"},"show-line":"",onSelect:W},{title:a(({name:d,type:z,code:oe})=>[_("span",Ae,[e(I,{color:G(z),size:"small"},{default:a(()=>[l(u(z),1)]),_:2},1032,["color"]),_("span",He,u(d),1),_("span",Ne,u(oe),1)])]),_:1},8,["expandedKeys","selectedKeys","tree-data"])]),_:1})]),_:1}),e(n,{xs:24,lg:12},{default:a(()=>[e(M,{title:"权限详情",class:"permission-detail-card"},{default:a(()=>[o.value?(h(),w("div",Ve,[_("div",Ye,[_("div",qe,[_("h3",null,u(o.value.name),1),_("p",null,u(o.value.description),1),e(b,null,{default:a(()=>[e(I,{color:G(o.value.type)},{default:a(()=>[l(u(o.value.type),1)]),_:1},8,["color"]),e(I,{color:"blue"},{default:a(()=>[l(u(o.value.module),1)]),_:1})]),_:1})])]),e(j),_("div",Le,[e(le,{column:1,size:"small"},{default:a(()=>[e(P,{label:"权限编码"},{default:a(()=>[l(u(o.value.code),1)]),_:1}),e(P,{label:"功能模块"},{default:a(()=>[l(u(o.value.module),1)]),_:1}),e(P,{label:"权限类型"},{default:a(()=>[l(u(o.value.type),1)]),_:1}),e(P,{label:"资源路径"},{default:a(()=>[l(u(o.value.resource||"-"),1)]),_:1}),e(P,{label:"请求方法"},{default:a(()=>[l(u(o.value.method||"-"),1)]),_:1}),e(P,{label:"排序"},{default:a(()=>[l(u(o.value.sort),1)]),_:1}),e(P,{label:"创建时间"},{default:a(()=>[l(u(U(o.value.createTime)),1)]),_:1}),e(P,{label:"更新时间"},{default:a(()=>[l(u(U(o.value.updateTime)),1)]),_:1})]),_:1})]),e(j),_("div",Fe,[e(b,{direction:"vertical",style:{width:"100%"}},{default:a(()=>[e(v,{type:"primary",block:"",onClick:t[5]||(t[5]=d=>X(o.value))},{default:a(()=>[e(r(Ce)),t[28]||(t[28]=l(" 编辑权限 "))]),_:1,__:[28]}),e(v,{block:"",onClick:t[6]||(t[6]=d=>Z(o.value))},{default:a(()=>[e(r(De)),t[29]||(t[29]=l(" 查看角色 "))]),_:1,__:[29]}),e(v,{block:"",onClick:t[7]||(t[7]=d=>ee(o.value))},{default:a(()=>[e(r(Ge)),t[30]||(t[30]=l(" 查看用户 "))]),_:1,__:[30]}),o.value.type==="菜单权限"?(h(),Ie(v,{key:0,block:"",onClick:t[8]||(t[8]=d=>te(o.value))},{default:a(()=>[e(r(A)),t[31]||(t[31]=l(" 添加子权限 "))]),_:1,__:[31]})):we("",!0)]),_:1})])])):(h(),w("div",Je,[e(se,{description:"请选择权限查看详情"})]))]),_:1})]),_:1})]),_:1})])}}},Xe=de(Qe,[["__scopeId","data-v-a156657d"]]);export{Xe as default};
