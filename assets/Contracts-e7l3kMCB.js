import{c as e,I as Ct,_ as Dt,r as y,a7 as wt,o as xt,a as $,b,k as l,g as _,aw as L,w as n,C as Nt,d as $t,e as v,f as bt,aj as Ot,j as Tt,U as St,V as ht,B as Mt,ak as Pt,a2 as Yt,P as Bt,S as It,af as F,O as zt,m as jt,p as P,q as R,t as T,s as At,W as Y,v as Et,a3 as Vt,a4 as U,a5 as Ht,a6 as Lt,ap as Ft,K as r,a8 as B}from"./index-Dk-eNI3p.js";var Rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};function K(f){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?Object(arguments[o]):{},p=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(i).filter(function(m){return Object.getOwnPropertyDescriptor(i,m).enumerable}))),p.forEach(function(m){Ut(f,m,i[m])})}return f}function Ut(f,o,i){return o in f?Object.defineProperty(f,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):f[o]=i,f}var I=function(o,i){var p=K({},o,i.attrs);return e(Ct,K({},p,{icon:Rt}),null)};I.displayName="PlayCircleOutlined";I.inheritAttrs=!1;const Kt={class:"contracts-management"},qt={class:"page-header"},Jt=["onClick"],Qt=["onClick"],Wt=["onClick"],Gt=["onClick"],Xt={__name:"Contracts",setup(f){const o=y(""),i=y(""),p=y(""),m=y(!1),d=y([]),w=y({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,t)=>`第 ${t[0]}-${t[1]} 条，共 ${a} 条`}),g=y([{id:"CT001",contractNo:"HT2024001",customerName:"北京华联超市",type:"transport",status:"active",amount:85e4,signDate:"2024-01-15",startDate:"2024-02-01",endDate:"2024-12-31",progress:65,key:"CT001"},{id:"CT002",contractNo:"HT2024002",customerName:"上海物流集团",type:"service",status:"pending",amount:12e5,signDate:"",startDate:"2024-07-01",endDate:"2025-06-30",progress:0,key:"CT002"},{id:"CT003",contractNo:"HT2024003",customerName:"深圳科技园区",type:"transport",status:"active",amount:68e4,signDate:"2024-03-20",startDate:"2024-04-01",endDate:"2024-10-31",progress:80,key:"CT003"},{id:"CT004",contractNo:"HT2024004",customerName:"广州制造有限公司",type:"lease",status:"completed",amount:45e4,signDate:"2023-12-10",startDate:"2024-01-01",endDate:"2024-06-30",progress:100,key:"CT004"},{id:"CT005",contractNo:"HT2024005",customerName:"成都商贸中心",type:"maintenance",status:"draft",amount:32e4,signDate:"",startDate:"2024-08-01",endDate:"2025-07-31",progress:0,key:"CT005"}]),S=y({total:g.value.length,active:g.value.filter(a=>a.status==="active").length,pending:g.value.filter(a=>a.status==="pending").length,totalAmount:g.value.reduce((a,t)=>a+t.amount,0)}),q=[{title:"合同编号",dataIndex:"contractNo",key:"contractNo",width:120},{title:"客户名称",dataIndex:"customerName",key:"customerName",width:180},{title:"合同类型",dataIndex:"type",key:"type",width:100},{title:"合同状态",dataIndex:"status",key:"status",width:100},{title:"合同金额",dataIndex:"amount",key:"amount",width:120},{title:"签署日期",dataIndex:"signDate",key:"signDate",width:120},{title:"结束日期",dataIndex:"endDate",key:"endDate",width:120},{title:"执行进度",dataIndex:"progress",key:"progress",width:120},{title:"操作",key:"actions",width:200,fixed:"right"}],J=wt(()=>{let a=g.value;if(o.value){const t=o.value.toLowerCase();a=a.filter(x=>x.contractNo.toLowerCase().includes(t)||x.customerName.toLowerCase().includes(t))}return i.value&&(a=a.filter(t=>t.status===i.value)),p.value&&(a=a.filter(t=>t.type===p.value)),w.value.total=a.length,a}),Q=a=>({draft:"default",pending:"orange",active:"blue",completed:"green",terminated:"red"})[a]||"default",W=a=>({draft:"草稿",pending:"待签署",active:"执行中",completed:"已完成",terminated:"已终止"})[a]||a,G=a=>a===0?"normal":a<50?"active":a<100?"normal":"success",z=a=>a?B(a).format("YYYY-MM-DD"):"-",X=a=>{o.value=a,w.value.current=1},j=()=>{w.value.current=1},Z=()=>{m.value=!0,setTimeout(()=>{m.value=!1,r.success("数据已刷新")},1e3)},tt=()=>{r.success("合同数据导出成功")},et=()=>{r.info("打开新建合同弹窗")},at=a=>{d.value=a},nt=a=>{w.value={...w.value,...a}},lt=a=>{r.info(`查看合同详情: ${a.contractNo}`)},st=a=>{r.info(`编辑合同: ${a.contractNo}`)},ot=a=>{a.status="active",a.signDate=B().format("YYYY-MM-DD"),r.success(`合同 ${a.contractNo} 签署成功`)},ut=a=>{r.info(`查看合同: ${a.contractNo}`)},rt=a=>{r.success(`合同 ${a.contractNo} 下载成功`)},it=a=>{r.success(`合同 ${a.contractNo} 已复制`)},dt=a=>{r.success(`合同 ${a.contractNo} 已归档`)},ct=a=>{a.status="terminated",r.success(`合同 ${a.contractNo} 已终止`)},_t=()=>{d.value.forEach(a=>{const t=g.value.find(x=>x.key===a);t&&t.status==="pending"&&(t.status="active",t.signDate=B().format("YYYY-MM-DD"))}),r.success(`已签署 ${d.value.length} 个合同`),d.value=[]},pt=()=>{r.success(`批量导出 ${d.value.length} 个合同`),d.value=[]},ft=()=>{r.success(`批量归档 ${d.value.length} 个合同`),d.value=[]},vt=()=>{g.value=g.value.filter(a=>!d.value.includes(a.key)),r.success(`已删除 ${d.value.length} 个合同`),d.value=[]};return xt(()=>{}),(a,t)=>{const x=Ot,k=bt,c=ht,A=St,h=Tt,O=Mt,E=$t,N=Nt,M=It,C=Lt,V=Ht,H=Vt,mt=At,gt=Et,yt=Ft,kt=jt;return v(),$("div",Kt,[b("div",qt,[b("h1",null,[e(_(L)),t[3]||(t[3]=l(" 合同管理 "))]),t[4]||(t[4]=b("p",null,"管理运输合同，跟踪合同执行，确保业务合规",-1))]),e(N,{class:"toolbar-card"},{default:n(()=>[e(E,{gutter:[16,16],align:"middle"},{default:n(()=>[e(k,{xs:24,sm:12,md:8},{default:n(()=>[e(x,{value:o.value,"onUpdate:value":t[0]||(t[0]=u=>o.value=u),placeholder:"搜索合同编号、客户名称",onSearch:X,style:{width:"100%"}},null,8,["value"])]),_:1}),e(k,{xs:24,sm:12,md:8},{default:n(()=>[e(h,null,{default:n(()=>[e(A,{value:i.value,"onUpdate:value":t[1]||(t[1]=u=>i.value=u),placeholder:"合同状态",style:{width:"120px"},onChange:j},{default:n(()=>[e(c,{value:""},{default:n(()=>t[5]||(t[5]=[l("全部状态")])),_:1,__:[5]}),e(c,{value:"draft"},{default:n(()=>t[6]||(t[6]=[l("草稿")])),_:1,__:[6]}),e(c,{value:"pending"},{default:n(()=>t[7]||(t[7]=[l("待签署")])),_:1,__:[7]}),e(c,{value:"active"},{default:n(()=>t[8]||(t[8]=[l("执行中")])),_:1,__:[8]}),e(c,{value:"completed"},{default:n(()=>t[9]||(t[9]=[l("已完成")])),_:1,__:[9]}),e(c,{value:"terminated"},{default:n(()=>t[10]||(t[10]=[l("已终止")])),_:1,__:[10]})]),_:1},8,["value"]),e(A,{value:p.value,"onUpdate:value":t[2]||(t[2]=u=>p.value=u),placeholder:"合同类型",style:{width:"120px"},onChange:j},{default:n(()=>[e(c,{value:""},{default:n(()=>t[11]||(t[11]=[l("全部类型")])),_:1,__:[11]}),e(c,{value:"transport"},{default:n(()=>t[12]||(t[12]=[l("运输合同")])),_:1,__:[12]}),e(c,{value:"service"},{default:n(()=>t[13]||(t[13]=[l("服务合同")])),_:1,__:[13]}),e(c,{value:"lease"},{default:n(()=>t[14]||(t[14]=[l("租赁合同")])),_:1,__:[14]}),e(c,{value:"maintenance"},{default:n(()=>t[15]||(t[15]=[l("维修合同")])),_:1,__:[15]})]),_:1},8,["value"])]),_:1})]),_:1}),e(k,{xs:24,sm:24,md:8,class:"text-right"},{default:n(()=>[e(h,null,{default:n(()=>[e(O,{onClick:Z},{default:n(()=>[e(_(Pt)),t[16]||(t[16]=l(" 刷新 "))]),_:1,__:[16]}),e(O,{onClick:tt},{default:n(()=>[e(_(Yt)),t[17]||(t[17]=l(" 导出 "))]),_:1,__:[17]}),e(O,{type:"primary",onClick:et},{default:n(()=>[e(_(Bt)),t[18]||(t[18]=l(" 新建合同 "))]),_:1,__:[18]})]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{gutter:[16,16],class:"stats-cards"},{default:n(()=>[e(k,{xs:24,sm:12,md:6},{default:n(()=>[e(N,{class:"stat-card"},{default:n(()=>[e(M,{title:"总合同数",value:S.value.total,"value-style":{color:"#1890ff"}},{prefix:n(()=>[e(_(L))]),_:1},8,["value"])]),_:1})]),_:1}),e(k,{xs:24,sm:12,md:6},{default:n(()=>[e(N,{class:"stat-card"},{default:n(()=>[e(M,{title:"执行中",value:S.value.active,"value-style":{color:"#52c41a"}},{prefix:n(()=>[e(_(I))]),_:1},8,["value"])]),_:1})]),_:1}),e(k,{xs:24,sm:12,md:6},{default:n(()=>[e(N,{class:"stat-card"},{default:n(()=>[e(M,{title:"待签署",value:S.value.pending,"value-style":{color:"#fa8c16"}},{prefix:n(()=>[e(_(F))]),_:1},8,["value"])]),_:1})]),_:1}),e(k,{xs:24,sm:12,md:6},{default:n(()=>[e(N,{class:"stat-card"},{default:n(()=>[e(M,{title:"合同总额",value:S.value.totalAmount,"value-style":{color:"#722ed1"},formatter:u=>`¥${(u/1e4).toFixed(0)}万`},{prefix:n(()=>[e(_(zt))]),_:1},8,["value","formatter"])]),_:1})]),_:1})]),_:1}),e(N,{title:"合同列表",class:"contracts-table-card"},{extra:n(()=>[e(h,null,{default:n(()=>[e(O,{size:"small",onClick:_t,disabled:d.value.length===0},{default:n(()=>[e(_(F)),t[19]||(t[19]=l(" 批量签署 "))]),_:1,__:[19]},8,["disabled"]),e(H,null,{overlay:n(()=>[e(V,null,{default:n(()=>[e(C,{key:"1",onClick:pt},{default:n(()=>t[21]||(t[21]=[l("批量导出")])),_:1,__:[21]}),e(C,{key:"2",onClick:ft},{default:n(()=>t[22]||(t[22]=[l("批量归档")])),_:1,__:[22]}),e(C,{key:"3",onClick:vt},{default:n(()=>t[23]||(t[23]=[l("批量删除")])),_:1,__:[23]})]),_:1})]),default:n(()=>[e(O,{size:"small"},{default:n(()=>[t[20]||(t[20]=l(" 更多操作 ")),e(_(U))]),_:1,__:[20]})]),_:1})]),_:1})]),default:n(()=>[e(kt,{columns:q,"data-source":J.value,pagination:w.value,loading:m.value,"row-selection":{selectedRowKeys:d.value,onChange:at},onChange:nt,size:"small",bordered:""},{bodyCell:n(({column:u,record:s})=>[u.key==="contractNo"?(v(),$("a",{key:0,onClick:D=>lt(s)},T(s.contractNo),9,Jt)):u.key==="status"?(v(),P(mt,{key:1,color:Q(s.status)},{default:n(()=>[l(T(W(s.status)),1)]),_:2},1032,["color"])):u.key==="amount"?(v(),$(Y,{key:2},[l(" ¥"+T(s.amount.toLocaleString()),1)],64)):u.key==="progress"?(v(),P(gt,{key:3,percent:s.progress,size:"small",status:G(s.progress)},null,8,["percent","status"])):u.key==="signDate"?(v(),$(Y,{key:4},[l(T(z(s.signDate)),1)],64)):u.key==="endDate"?(v(),$(Y,{key:5},[l(T(z(s.endDate)),1)],64)):u.key==="actions"?(v(),P(h,{key:6},{default:n(()=>[b("a",{onClick:D=>st(s)},"编辑",8,Qt),s.status==="pending"?(v(),$("a",{key:0,onClick:D=>ot(s)},"签署",8,Wt)):R("",!0),b("a",{onClick:D=>ut(s)},"查看",8,Gt),e(H,null,{overlay:n(()=>[e(V,null,{default:n(()=>[e(C,{key:"1",onClick:D=>rt(s)},{default:n(()=>t[25]||(t[25]=[l("下载合同")])),_:2,__:[25]},1032,["onClick"]),e(C,{key:"2",onClick:D=>it(s)},{default:n(()=>t[26]||(t[26]=[l("复制合同")])),_:2,__:[26]},1032,["onClick"]),e(C,{key:"3",onClick:D=>dt(s)},{default:n(()=>t[27]||(t[27]=[l("归档合同")])),_:2,__:[27]},1032,["onClick"]),e(yt),e(C,{key:"4",onClick:D=>ct(s),style:{color:"#ff4d4f"}},{default:n(()=>t[28]||(t[28]=[l("终止合同")])),_:2,__:[28]},1032,["onClick"])]),_:2},1024)]),default:n(()=>[b("a",null,[t[24]||(t[24]=l(" 更多 ")),e(_(U))])]),_:2},1024)]),_:2},1024)):R("",!0)]),_:1},8,["data-source","pagination","loading","row-selection"])]),_:1})])}}},te=Dt(Xt,[["__scopeId","data-v-318faae0"]]);export{te as default};
