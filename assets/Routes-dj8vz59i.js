import{r as N}from"./mockData-_Udtor0Z.js";import{_ as Ie,r as _,a7 as De,o as Oe,a as P,b as g,c as t,k as u,g as c,am as j,w as a,C as Fe,d as qe,an as Be,e as R,f as ze,aj as Ee,j as Ve,U as Ke,V as Ne,B as Pe,ak as je,a2 as Ae,P as Je,S as Qe,ao as We,h as he,m as Ge,p as A,q as He,t as F,s as Xe,W as Ye,v as Ze,a3 as et,a4 as X,a5 as tt,a6 as at,ap as lt,aq as nt,ar as ut,$ as st,as as ot,at as it,au as dt,K as i}from"./index-Dk-eNI3p.js";const rt={class:"routes-management"},vt={class:"page-header"},ft=["onClick"],_t={class:"ml-1"},mt=["onClick"],pt=["onClick"],ct=["onClick"],gt={__name:"Routes",setup(yt){const S=_(""),U=_(""),M=_(""),q=_(!1),f=_([]),C=_({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,e)=>`第 ${e[0]}-${e[1]} 条，共 ${l} 条`}),v=_(N.map((l,e)=>({...l,key:l.id,status:e%3===0?"active":e%3===1?"inactive":"maintenance"}))),L=_({total:v.value.length,active:v.value.filter(l=>l.status==="active").length,avgDistance:Math.round(N.reduce((l,e)=>l+e.distance,0)/N.length),monthlyUsage:1250}),Y=[{title:"路线名称",dataIndex:"name",key:"name",width:150},{title:"起点",dataIndex:"origin",key:"origin",width:120},{title:"终点",dataIndex:"destination",key:"destination",width:120},{title:"距离(km)",dataIndex:"distance",key:"distance",width:100},{title:"预计时间(h)",dataIndex:"estimatedTime",key:"estimatedTime",width:120},{title:"过路费(¥)",dataIndex:"tollFee",key:"tollFee",width:100},{title:"难度",dataIndex:"difficulty",key:"difficulty",width:80},{title:"交通状况",dataIndex:"trafficLevel",key:"trafficLevel",width:120},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"操作",key:"actions",width:200,fixed:"right"}],Z=De(()=>{let l=v.value;if(S.value){const e=S.value.toLowerCase();l=l.filter(p=>p.name.toLowerCase().includes(e)||p.origin.toLowerCase().includes(e)||p.destination.toLowerCase().includes(e))}return U.value&&(l=l.filter(e=>e.status===U.value)),M.value&&(l=l.filter(e=>e.difficulty===M.value)),C.value.total=l.length,l}),w=_(!1),B=_(""),J=_(),z=_(!1),E=_(null),s=_({name:"",code:"",origin:"",destination:"",distance:null,estimatedTime:null,tollFee:null,difficulty:"",trafficLevel:"",roadCondition:"",waypoints:[],restrictions:"",notes:""}),ee={name:[{required:!0,message:"请输入路线名称",trigger:"blur"}],origin:[{required:!0,message:"请输入起点",trigger:"blur"}],destination:[{required:!0,message:"请输入终点",trigger:"blur"}],distance:[{required:!0,message:"请输入距离",trigger:"blur"}],estimatedTime:[{required:!0,message:"请输入预计时间",trigger:"blur"}],difficulty:[{required:!0,message:"请选择难度等级",trigger:"change"}],trafficLevel:[{required:!0,message:"请选择交通状况",trigger:"change"}],roadCondition:[{required:!0,message:"请选择路况",trigger:"change"}]},te=l=>({active:"green",inactive:"red",maintenance:"orange"})[l]||"default",ae=l=>({active:"启用中",inactive:"已停用",maintenance:"维护中"})[l]||l,le=l=>({简单:"green",中等:"orange",困难:"red"})[l]||"default",ne=l=>({畅通:25,中等:50,繁忙:75,拥堵:100})[l]||0,ue=l=>({畅通:"success",中等:"normal",繁忙:"active",拥堵:"exception"})[l]||"normal",se=l=>{S.value=l,C.value.current=1},Q=()=>{C.value.current=1},oe=()=>{q.value=!0,setTimeout(()=>{q.value=!1,i.success("数据已刷新")},1e3)},ie=()=>{i.success("路线数据导出成功")},de=()=>{B.value="新增路线",z.value=!1,E.value=null,V(),w.value=!0},V=()=>{s.value={name:"",code:"",origin:"",destination:"",distance:null,estimatedTime:null,tollFee:null,difficulty:"",trafficLevel:"",roadCondition:"",waypoints:[],restrictions:"",notes:""}},re=l=>{f.value=l},ve=l=>{C.value={...C.value,...l}},fe=l=>{i.info(`查看路线详情: ${l.name}`)},_e=l=>{B.value="编辑路线",z.value=!0,E.value=l.id,s.value={...l},w.value=!0},me=l=>{i.loading("正在优化路线...",2),setTimeout(()=>{i.success(`路线 ${l.name} 优化完成`)},2e3)},pe=l=>{i.info(`打开地图查看路线: ${l.name}`)},ce=l=>{i.success(`路线 ${l.name} 已复制`)},ge=l=>{i.success(`路线 ${l.name} 分享链接已生成`)},ye=l=>{i.success(`路线 ${l.name} 导出成功`)},ke=l=>{const e=v.value.findIndex(p=>p.id===l.id);e>-1&&(v.value.splice(e,1),i.success("路线删除成功"))},Ce=()=>{i.loading(`正在优化 ${f.value.length} 条路线...`,3),setTimeout(()=>{i.success("批量优化完成"),f.value=[]},3e3)},we=()=>{f.value.forEach(l=>{const e=v.value.find(p=>p.key===l);e&&(e.status="active")}),i.success(`已启用 ${f.value.length} 条路线`),f.value=[]},xe=()=>{f.value.forEach(l=>{const e=v.value.find(p=>p.key===l);e&&(e.status="inactive")}),i.success(`已停用 ${f.value.length} 条路线`),f.value=[]},be=()=>{v.value=v.value.filter(l=>!f.value.includes(l.key)),i.success(`已删除 ${f.value.length} 条路线`),f.value=[]},$e=()=>{J.value.validate().then(()=>{if(z.value){const l=v.value.findIndex(e=>e.id===E.value);l>-1&&(v.value[l]={...v.value[l],...s.value},i.success("路线更新成功"))}else{const l={...s.value,id:`R${String(v.value.length+1).padStart(3,"0")}`,key:`R${String(v.value.length+1).padStart(3,"0")}`,status:"active"};v.value.unshift(l),i.success("路线添加成功")}w.value=!1,V()}).catch(()=>{i.error("请检查表单信息")})},Re=()=>{w.value=!1,V()};return Oe(()=>{}),(l,e)=>{const p=Ee,d=ze,o=Ne,x=Ke,I=Ve,T=Pe,b=qe,$=Fe,D=Qe,y=at,W=tt,h=et,G=Xe,Se=Ze,Te=lt,Ue=Ge,O=ot,m=st,K=it,H=dt,Me=ut,Le=Be;return R(),P("div",rt,[g("div",vt,[g("h1",null,[t(c(j)),e[17]||(e[17]=u(" 路线管理 "))]),e[18]||(e[18]=g("p",null,"管理运输路线，优化配送效率，降低运营成本",-1))]),t($,{class:"toolbar-card"},{default:a(()=>[t(b,{gutter:[16,16],align:"middle"},{default:a(()=>[t(d,{xs:24,sm:12,md:8},{default:a(()=>[t(p,{value:S.value,"onUpdate:value":e[0]||(e[0]=n=>S.value=n),placeholder:"搜索路线名称、起点、终点",onSearch:se,style:{width:"100%"}},null,8,["value"])]),_:1}),t(d,{xs:24,sm:12,md:8},{default:a(()=>[t(I,null,{default:a(()=>[t(x,{value:U.value,"onUpdate:value":e[1]||(e[1]=n=>U.value=n),placeholder:"路线状态",style:{width:"120px"},onChange:Q},{default:a(()=>[t(o,{value:""},{default:a(()=>e[19]||(e[19]=[u("全部状态")])),_:1,__:[19]}),t(o,{value:"active"},{default:a(()=>e[20]||(e[20]=[u("启用中")])),_:1,__:[20]}),t(o,{value:"inactive"},{default:a(()=>e[21]||(e[21]=[u("已停用")])),_:1,__:[21]}),t(o,{value:"maintenance"},{default:a(()=>e[22]||(e[22]=[u("维护中")])),_:1,__:[22]})]),_:1},8,["value"]),t(x,{value:M.value,"onUpdate:value":e[2]||(e[2]=n=>M.value=n),placeholder:"难度等级",style:{width:"120px"},onChange:Q},{default:a(()=>[t(o,{value:""},{default:a(()=>e[23]||(e[23]=[u("全部难度")])),_:1,__:[23]}),t(o,{value:"简单"},{default:a(()=>e[24]||(e[24]=[u("简单")])),_:1,__:[24]}),t(o,{value:"中等"},{default:a(()=>e[25]||(e[25]=[u("中等")])),_:1,__:[25]}),t(o,{value:"困难"},{default:a(()=>e[26]||(e[26]=[u("困难")])),_:1,__:[26]})]),_:1},8,["value"])]),_:1})]),_:1}),t(d,{xs:24,sm:24,md:8,class:"text-right"},{default:a(()=>[t(I,null,{default:a(()=>[t(T,{onClick:oe},{default:a(()=>[t(c(je)),e[27]||(e[27]=u(" 刷新 "))]),_:1,__:[27]}),t(T,{onClick:ie},{default:a(()=>[t(c(Ae)),e[28]||(e[28]=u(" 导出 "))]),_:1,__:[28]}),t(T,{type:"primary",onClick:de},{default:a(()=>[t(c(Je)),e[29]||(e[29]=u(" 新增路线 "))]),_:1,__:[29]})]),_:1})]),_:1})]),_:1})]),_:1}),t(b,{gutter:[16,16],class:"stats-cards"},{default:a(()=>[t(d,{xs:24,sm:12,md:6},{default:a(()=>[t($,{class:"stat-card"},{default:a(()=>[t(D,{title:"总路线数",value:L.value.total,"value-style":{color:"#1890ff"}},{prefix:a(()=>[t(c(j))]),_:1},8,["value"])]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:6},{default:a(()=>[t($,{class:"stat-card"},{default:a(()=>[t(D,{title:"启用路线",value:L.value.active,"value-style":{color:"#52c41a"}},{prefix:a(()=>[t(c(We))]),_:1},8,["value"])]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:6},{default:a(()=>[t($,{class:"stat-card"},{default:a(()=>[t(D,{title:"平均距离",value:L.value.avgDistance,suffix:"公里","value-style":{color:"#722ed1"}},{prefix:a(()=>[t(c(j))]),_:1},8,["value"])]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:6},{default:a(()=>[t($,{class:"stat-card"},{default:a(()=>[t(D,{title:"本月使用",value:L.value.monthlyUsage,suffix:"次","value-style":{color:"#fa8c16"}},{prefix:a(()=>[t(c(he))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t($,{title:"路线列表",class:"routes-table-card"},{extra:a(()=>[t(I,null,{default:a(()=>[t(T,{size:"small",onClick:Ce,disabled:f.value.length===0},{default:a(()=>[t(c(nt)),e[30]||(e[30]=u(" 批量优化 "))]),_:1,__:[30]},8,["disabled"]),t(h,null,{overlay:a(()=>[t(W,null,{default:a(()=>[t(y,{key:"1",onClick:we},{default:a(()=>e[32]||(e[32]=[u("批量启用")])),_:1,__:[32]}),t(y,{key:"2",onClick:xe},{default:a(()=>e[33]||(e[33]=[u("批量停用")])),_:1,__:[33]}),t(y,{key:"3",onClick:be},{default:a(()=>e[34]||(e[34]=[u("批量删除")])),_:1,__:[34]})]),_:1})]),default:a(()=>[t(T,{size:"small"},{default:a(()=>[e[31]||(e[31]=u(" 更多操作 ")),t(c(X))]),_:1,__:[31]})]),_:1})]),_:1})]),default:a(()=>[t(Ue,{columns:Y,"data-source":Z.value,pagination:C.value,loading:q.value,"row-selection":{selectedRowKeys:f.value,onChange:re},onChange:ve,size:"small",bordered:""},{bodyCell:a(({column:n,record:r})=>[n.key==="name"?(R(),P("a",{key:0,onClick:k=>fe(r)},F(r.name),9,ft)):n.key==="status"?(R(),A(G,{key:1,color:te(r.status)},{default:a(()=>[u(F(ae(r.status)),1)]),_:2},1032,["color"])):n.key==="difficulty"?(R(),A(G,{key:2,color:le(r.difficulty)},{default:a(()=>[u(F(r.difficulty),1)]),_:2},1032,["color"])):n.key==="trafficLevel"?(R(),P(Ye,{key:3},[t(Se,{percent:ne(r.trafficLevel),status:ue(r.trafficLevel),size:"small"},null,8,["percent","status"]),g("span",_t,F(r.trafficLevel),1)],64)):n.key==="actions"?(R(),A(I,{key:4},{default:a(()=>[g("a",{onClick:k=>_e(r)},"编辑",8,mt),g("a",{onClick:k=>me(r)},"优化",8,pt),g("a",{onClick:k=>pe(r)},"地图",8,ct),t(h,null,{overlay:a(()=>[t(W,null,{default:a(()=>[t(y,{key:"1",onClick:k=>ce(r)},{default:a(()=>e[36]||(e[36]=[u("复制路线")])),_:2,__:[36]},1032,["onClick"]),t(y,{key:"2",onClick:k=>ge(r)},{default:a(()=>e[37]||(e[37]=[u("分享路线")])),_:2,__:[37]},1032,["onClick"]),t(y,{key:"3",onClick:k=>ye(r)},{default:a(()=>e[38]||(e[38]=[u("导出路线")])),_:2,__:[38]},1032,["onClick"]),t(Te),t(y,{key:"4",onClick:k=>ke(r),style:{color:"#ff4d4f"}},{default:a(()=>e[39]||(e[39]=[u("删除路线")])),_:2,__:[39]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[g("a",null,[e[35]||(e[35]=u(" 更多 ")),t(c(X))])]),_:2},1024)]),_:2},1024)):He("",!0)]),_:1},8,["data-source","pagination","loading","row-selection"])]),_:1}),t(Le,{open:w.value,"onUpdate:open":e[16]||(e[16]=n=>w.value=n),title:B.value,width:"800px",onOk:$e,onCancel:Re},{default:a(()=>[t(Me,{ref_key:"formRef",ref:J,model:s.value,rules:ee,layout:"vertical"},{default:a(()=>[t(b,{gutter:16},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(m,{label:"路线名称",name:"name"},{default:a(()=>[t(O,{value:s.value.name,"onUpdate:value":e[3]||(e[3]=n=>s.value.name=n),placeholder:"请输入路线名称"},null,8,["value"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(m,{label:"路线编码",name:"code"},{default:a(()=>[t(O,{value:s.value.code,"onUpdate:value":e[4]||(e[4]=n=>s.value.code=n),placeholder:"自动生成或手动输入"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(m,{label:"起点",name:"origin"},{default:a(()=>[t(O,{value:s.value.origin,"onUpdate:value":e[5]||(e[5]=n=>s.value.origin=n),placeholder:"请输入起点"},null,8,["value"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(m,{label:"终点",name:"destination"},{default:a(()=>[t(O,{value:s.value.destination,"onUpdate:value":e[6]||(e[6]=n=>s.value.destination=n),placeholder:"请输入终点"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(d,{span:8},{default:a(()=>[t(m,{label:"距离(公里)",name:"distance"},{default:a(()=>[t(K,{value:s.value.distance,"onUpdate:value":e[7]||(e[7]=n=>s.value.distance=n),min:0,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(m,{label:"预计时间(小时)",name:"estimatedTime"},{default:a(()=>[t(K,{value:s.value.estimatedTime,"onUpdate:value":e[8]||(e[8]=n=>s.value.estimatedTime=n),min:0,step:.5,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(m,{label:"过路费(元)",name:"tollFee"},{default:a(()=>[t(K,{value:s.value.tollFee,"onUpdate:value":e[9]||(e[9]=n=>s.value.tollFee=n),min:0,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(d,{span:8},{default:a(()=>[t(m,{label:"难度等级",name:"difficulty"},{default:a(()=>[t(x,{value:s.value.difficulty,"onUpdate:value":e[10]||(e[10]=n=>s.value.difficulty=n),placeholder:"请选择难度等级"},{default:a(()=>[t(o,{value:"简单"},{default:a(()=>e[40]||(e[40]=[u("简单")])),_:1,__:[40]}),t(o,{value:"中等"},{default:a(()=>e[41]||(e[41]=[u("中等")])),_:1,__:[41]}),t(o,{value:"困难"},{default:a(()=>e[42]||(e[42]=[u("困难")])),_:1,__:[42]})]),_:1},8,["value"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(m,{label:"交通状况",name:"trafficLevel"},{default:a(()=>[t(x,{value:s.value.trafficLevel,"onUpdate:value":e[11]||(e[11]=n=>s.value.trafficLevel=n),placeholder:"请选择交通状况"},{default:a(()=>[t(o,{value:"畅通"},{default:a(()=>e[43]||(e[43]=[u("畅通")])),_:1,__:[43]}),t(o,{value:"中等"},{default:a(()=>e[44]||(e[44]=[u("中等")])),_:1,__:[44]}),t(o,{value:"繁忙"},{default:a(()=>e[45]||(e[45]=[u("繁忙")])),_:1,__:[45]}),t(o,{value:"拥堵"},{default:a(()=>e[46]||(e[46]=[u("拥堵")])),_:1,__:[46]})]),_:1},8,["value"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(m,{label:"路况",name:"roadCondition"},{default:a(()=>[t(x,{value:s.value.roadCondition,"onUpdate:value":e[12]||(e[12]=n=>s.value.roadCondition=n),placeholder:"请选择路况"},{default:a(()=>[t(o,{value:"优秀"},{default:a(()=>e[47]||(e[47]=[u("优秀")])),_:1,__:[47]}),t(o,{value:"良好"},{default:a(()=>e[48]||(e[48]=[u("良好")])),_:1,__:[48]}),t(o,{value:"一般"},{default:a(()=>e[49]||(e[49]=[u("一般")])),_:1,__:[49]}),t(o,{value:"较差"},{default:a(()=>e[50]||(e[50]=[u("较差")])),_:1,__:[50]})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(m,{label:"途经点",name:"waypoints"},{default:a(()=>[t(x,{value:s.value.waypoints,"onUpdate:value":e[13]||(e[13]=n=>s.value.waypoints=n),mode:"tags",placeholder:"请输入途经点，按回车添加",style:{width:"100%"}},null,8,["value"])]),_:1}),t(m,{label:"限制条件",name:"restrictions"},{default:a(()=>[t(H,{value:s.value.restrictions,"onUpdate:value":e[14]||(e[14]=n=>s.value.restrictions=n),placeholder:"请输入限制条件",rows:3},null,8,["value"])]),_:1}),t(m,{label:"备注",name:"notes"},{default:a(()=>[t(H,{value:s.value.notes,"onUpdate:value":e[15]||(e[15]=n=>s.value.notes=n),placeholder:"请输入备注信息",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}},wt=Ie(gt,[["__scopeId","data-v-97d2adf0"]]);export{wt as default};
