import{c as t,I as rt,_ as it,r as _,o as ut,n as dt,a as L,b as p,w as e,d as ct,u as pt,e as D,f as _t,C as ft,S as mt,g as f,h as vt,D as U,i as gt,T as yt,j as ht,B as bt,k as r,P as xt,E as Ct,l as Ot,m as kt,p as R,q as $t,s as wt,t as s,v as Mt,L as zt,x as St,y as Nt,A as Dt,z as q,F as It,G as Vt,H as Bt,J as Pt,K as z}from"./index-Dk-eNI3p.js";import{s as O,v as h,o as b,d as H}from"./mockData-_Udtor0Z.js";import{E as At}from"./ExclamationOutlined-Ciss07O4.js";var Tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};function F(m){for(var u=1;u<arguments.length;u++){var c=arguments[u]!=null?Object(arguments[u]):{},x=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(x=x.concat(Object.getOwnPropertySymbols(c).filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable}))),x.forEach(function(v){Et(m,v,c[v])})}return m}function Et(m,u,c){return u in m?Object.defineProperty(m,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):m[u]=c,m}var P=function(u,c){var x=F({},u,c.attrs);return t(rt,F({},x,{icon:Tt}),null)};P.displayName="CloudOutlined";P.inheritAttrs=!1;const jt=["onClick"],Lt=["onClick"],Ut=["onClick"],Rt={style:{"text-align":"center"}},qt={style:{"font-size":"48px",color:"#1890ff","margin-bottom":"16px"}},Ht={style:{margin:"0"}},Ft={style:{margin:"8px 0",color:"#666"}},Gt={style:{margin:"0","font-size":"12px",color:"#999"}},Jt={style:{color:"#52c41a","font-weight":"bold"}},Qt={__name:"index",setup(m){const u=pt(),c=_(null),x=_(null),v=_({totalVehicles:O.overview.totalVehicles,activeVehicles:O.overview.activeVehicles,todayOrders:O.overview.todayOrders,totalDrivers:O.overview.totalDrivers}),G=[{title:"车牌号",dataIndex:"plateNumber",key:"plateNumber"},{title:"司机",dataIndex:"driver",key:"driver"},{title:"当前位置",dataIndex:"location",key:"location"},{title:"状态",dataIndex:"status",key:"status"},{title:"运输进度",dataIndex:"progress",key:"progress"}],A=_(h.map((l,a)=>({id:a+1,plateNumber:l.plateNumber,driver:l.driver,location:l.location,status:l.status,progress:J(l.status)})));function J(l){return{运输中:Math.floor(Math.random()*40)+40,装货中:Math.floor(Math.random()*30)+10,待发车:0,已到达:100,返程中:Math.floor(Math.random()*30)+70}[l]||0}const Q=_([{type:"订",title:`新订单 ${b[0].id} 已创建`,time:"5分钟前",color:"#1890ff"},{type:"车",title:`车辆 ${h[0].plateNumber} 正在运输中`,time:"15分钟前",color:"#52c41a"},{type:"维",title:`车辆 ${h[1].plateNumber} 需要保养`,time:"1小时前",color:"#faad14"},{type:"司",title:`司机${H[0].name}已上线`,time:"2小时前",color:"#722ed1"},{type:"订",title:`订单 ${b[2].id} 已完成`,time:"3小时前",color:"#52c41a"}]),T=_([{id:1,title:`审核订单 ${b[0].id}`,priority:"高",deadline:"今天 18:00",status:"error"},{id:2,title:`安排车辆 ${h[2].plateNumber} 维修`,priority:"中",deadline:"明天 10:00",status:"warning"},{id:3,title:`更新司机 ${H[3].name} 档案`,priority:"低",deadline:"本周五",status:"default"},{id:4,title:`处理客户 ${b[1].customerName} 投诉`,priority:"高",deadline:"今天 20:00",status:"error"}]),E=_([{id:1,title:"车辆超速告警",description:`${h[0].plateNumber} 在${h[0].location}超速行驶`,color:"#ff4d4f"},{id:2,title:"路线偏离",description:`${h[1].plateNumber} 偏离预定路线`,color:"#faad14"},{id:3,title:"车辆故障",description:`${h[2].plateNumber} 发动机温度过高`,color:"#ff7875"},{id:4,title:"延迟送达",description:`订单 ${b[2].id} 预计延迟2小时`,color:"#ffa940"}]),S=_({temperature:22,description:"多云转晴",humidity:65,windSpeed:12}),g=_({cpu:45,memory:68,onlineUsers:23,uptime:127}),k=_({newOrders:b.filter(l=>l.createDate==="2024-06-30").length,completedOrders:O.overview.completedOrders,shippingOrders:b.filter(l=>l.status==="运输中").length,errorOrders:b.filter(l=>l.status==="异常").length,todayRevenue:O.overview.monthlyRevenue}),W=l=>({运输中:"blue",装货中:"orange",待发车:"default",已到达:"green",返程中:"purple",维修中:"red"})[l]||"default",X=()=>{z.loading("正在刷新数据...",1),setTimeout(()=>{A.value.forEach(l=>{l.status==="运输中"&&(l.progress=Math.min(100,l.progress+Math.floor(Math.random()*10)))}),z.success("数据刷新成功")},1e3)},Y=l=>{z.info(`车辆 ${l.plateNumber} 当前位置：${l.location}`)},N=l=>{const a={"new-order":"/business/orders",dispatch:"/dispatch/plan",monitor:"/dispatch/monitor",report:"/data/report"};a[l]&&u.push(a[l])},Z=l=>{const a=T.value.find(d=>d.id===l);a&&z.success(`开始处理：${a.title}`)},K=l=>{const a=E.value.find(d=>d.id===l);a&&z.warning(`查看告警：${a.title}`)},tt=()=>{console.log("初始化图表")};return ut(()=>{dt(()=>{tt()}),setInterval(()=>{g.value.cpu=Math.floor(Math.random()*100),g.value.memory=Math.floor(Math.random()*100),g.value.onlineUsers=Math.floor(Math.random()*50)+10},3e4)}),(l,a)=>{const d=mt,i=ft,n=_t,y=ct,$=bt,et=ht,w=wt,at=Mt,lt=kt,j=Dt,I=Nt,V=St,B=zt,ot=It,st=Vt,M=Pt,nt=Bt;return D(),L("div",null,[a[9]||(a[9]=p("h1",null,"🚛 车辆物流工作台",-1)),t(y,{gutter:16,style:{"margin-bottom":"24px"}},{default:e(()=>[t(n,{span:6},{default:e(()=>[t(i,null,{default:e(()=>[t(d,{title:"总车辆数",value:v.value.totalVehicles,"value-style":{color:"#3f8600"},suffix:"辆"},{prefix:e(()=>[t(f(vt))]),_:1},8,["value"])]),_:1})]),_:1}),t(n,{span:6},{default:e(()=>[t(i,null,{default:e(()=>[t(d,{title:"在途车辆",value:v.value.activeVehicles,"value-style":{color:"#1890ff"},suffix:"辆"},{prefix:e(()=>[t(f(U))]),_:1},8,["value"])]),_:1})]),_:1}),t(n,{span:6},{default:e(()=>[t(i,null,{default:e(()=>[t(d,{title:"今日订单",value:v.value.todayOrders,"value-style":{color:"#cf1322"},suffix:"单"},{prefix:e(()=>[t(f(gt))]),_:1},8,["value"])]),_:1})]),_:1}),t(n,{span:6},{default:e(()=>[t(i,null,{default:e(()=>[t(d,{title:"司机总数",value:v.value.totalDrivers,"value-style":{color:"#722ed1"},suffix:"人"},{prefix:e(()=>[t(f(yt))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(y,{gutter:16,style:{"margin-bottom":"24px"}},{default:e(()=>[t(n,{span:24},{default:e(()=>[t(i,{title:"快捷操作"},{default:e(()=>[t(et,{size:"large"},{default:e(()=>[t($,{type:"primary",size:"large",onClick:a[0]||(a[0]=o=>N("new-order"))},{default:e(()=>[t(f(xt)),a[4]||(a[4]=r(" 新建订单 "))]),_:1,__:[4]}),t($,{size:"large",onClick:a[1]||(a[1]=o=>N("dispatch"))},{default:e(()=>[t(f(U)),a[5]||(a[5]=r(" 车辆调度 "))]),_:1,__:[5]}),t($,{size:"large",onClick:a[2]||(a[2]=o=>N("monitor"))},{default:e(()=>[t(f(Ct)),a[6]||(a[6]=r(" 实时监控 "))]),_:1,__:[6]}),t($,{size:"large",onClick:a[3]||(a[3]=o=>N("report"))},{default:e(()=>[t(f(Ot)),a[7]||(a[7]=r(" 数据报表 "))]),_:1,__:[7]})]),_:1})]),_:1})]),_:1})]),_:1}),t(y,{gutter:16,style:{"margin-bottom":"24px"}},{default:e(()=>[t(n,{span:12},{default:e(()=>[t(i,{title:"车辆状态分布"},{default:e(()=>[p("div",{ref_key:"vehicleChart",ref:c,style:{height:"300px"}},null,512)]),_:1})]),_:1}),t(n,{span:12},{default:e(()=>[t(i,{title:"本月订单趋势"},{default:e(()=>[p("div",{ref_key:"orderChart",ref:x,style:{height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),t(y,{gutter:16,style:{"margin-bottom":"24px"}},{default:e(()=>[t(n,{span:24},{default:e(()=>[t(i,{title:"实时车辆状态"},{extra:e(()=>[t($,{size:"small",onClick:X},{default:e(()=>a[8]||(a[8]=[r("刷新")])),_:1,__:[8]})]),default:e(()=>[t(lt,{columns:G,"data-source":A.value,pagination:{pageSize:5},size:"small"},{bodyCell:e(({column:o,record:C})=>[o.key==="status"?(D(),R(w,{key:0,color:W(C.status)},{default:e(()=>[r(s(C.status),1)]),_:2},1032,["color"])):o.key==="location"?(D(),L("a",{key:1,onClick:Wt=>Y(C)},s(C.location),9,jt)):o.key==="progress"?(D(),R(at,{key:2,percent:C.progress,size:"small"},null,8,["percent"])):$t("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1}),t(y,{gutter:16,style:{"margin-bottom":"24px"}},{default:e(()=>[t(n,{span:8},{default:e(()=>[t(i,{title:"最新动态","body-style":{padding:"12px"}},{default:e(()=>[t(B,{"data-source":Q.value,size:"small"},{renderItem:e(({item:o})=>[t(V,null,{default:e(()=>[t(I,null,{avatar:e(()=>[t(j,{style:q({backgroundColor:o.color})},{default:e(()=>[r(s(o.type),1)]),_:2},1032,["style"])]),title:e(()=>[r(s(o.title),1)]),description:e(()=>[r(s(o.time),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(n,{span:8},{default:e(()=>[t(i,{title:"待办事项","body-style":{padding:"12px"}},{default:e(()=>[t(B,{"data-source":T.value,size:"small"},{renderItem:e(({item:o})=>[t(V,null,{actions:e(()=>[p("a",{onClick:C=>Z(o.id)},"处理",8,Lt)]),default:e(()=>[t(I,null,{avatar:e(()=>[t(ot,{status:o.status},null,8,["status"])]),title:e(()=>[r(s(o.title),1)]),description:e(()=>[r(" 优先级: "+s(o.priority)+" | 截止: "+s(o.deadline),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(n,{span:8},{default:e(()=>[t(i,{title:"异常告警","body-style":{padding:"12px"}},{default:e(()=>[t(B,{"data-source":E.value,size:"small"},{renderItem:e(({item:o})=>[t(V,null,{actions:e(()=>[p("a",{onClick:C=>K(o.id)},"查看",8,Ut)]),default:e(()=>[t(I,null,{avatar:e(()=>[t(j,{style:q({backgroundColor:o.color})},{default:e(()=>[t(f(At))]),_:2},1032,["style"])]),title:e(()=>[r(s(o.title),1)]),description:e(()=>[r(s(o.description),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1}),t(y,{gutter:16},{default:e(()=>[t(n,{span:8},{default:e(()=>[t(i,{title:"今日天气"},{default:e(()=>[p("div",Rt,[p("div",qt,[t(f(P))]),p("h2",Ht,s(S.value.temperature)+"°C",1),p("p",Ft,s(S.value.description),1),p("p",Gt," 湿度: "+s(S.value.humidity)+"% | 风速: "+s(S.value.windSpeed)+"km/h ",1)])]),_:1})]),_:1}),t(n,{span:8},{default:e(()=>[t(i,{title:"系统状态"},{default:e(()=>[t(y,{gutter:16},{default:e(()=>[t(n,{span:12},{default:e(()=>[t(d,{title:"CPU使用率",value:g.value.cpu,suffix:"%","value-style":{color:g.value.cpu>80?"#cf1322":"#3f8600"}},null,8,["value","value-style"])]),_:1}),t(n,{span:12},{default:e(()=>[t(d,{title:"内存使用率",value:g.value.memory,suffix:"%","value-style":{color:g.value.memory>80?"#cf1322":"#3f8600"}},null,8,["value","value-style"])]),_:1})]),_:1}),t(st),t(y,{gutter:16},{default:e(()=>[t(n,{span:12},{default:e(()=>[t(d,{title:"在线用户",value:g.value.onlineUsers,suffix:"人"},null,8,["value"])]),_:1}),t(n,{span:12},{default:e(()=>[t(d,{title:"系统运行",value:g.value.uptime,suffix:"天"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(n,{span:8},{default:e(()=>[t(i,{title:"快速统计"},{default:e(()=>[t(nt,{column:1,size:"small"},{default:e(()=>[t(M,{label:"今日新增订单"},{default:e(()=>[t(w,{color:"blue"},{default:e(()=>[r(s(k.value.newOrders),1)]),_:1})]),_:1}),t(M,{label:"完成订单"},{default:e(()=>[t(w,{color:"green"},{default:e(()=>[r(s(k.value.completedOrders),1)]),_:1})]),_:1}),t(M,{label:"运输中订单"},{default:e(()=>[t(w,{color:"orange"},{default:e(()=>[r(s(k.value.shippingOrders),1)]),_:1})]),_:1}),t(M,{label:"异常订单"},{default:e(()=>[t(w,{color:"red"},{default:e(()=>[r(s(k.value.errorOrders),1)]),_:1})]),_:1}),t(M,{label:"今日收入"},{default:e(()=>[p("span",Jt," ¥"+s(k.value.todayRevenue.toLocaleString()),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}},Kt=it(Qt,[["__scopeId","data-v-08002383"]]);export{Kt as default};
