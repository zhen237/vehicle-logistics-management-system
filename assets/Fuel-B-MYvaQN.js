import{c as t,I as he,_ as Ce,r as _,a7 as be,a8 as T,o as we,a as C,b as g,k as n,g as f,w as a,C as De,d as Fe,e as p,f as $e,aj as Le,j as Ne,a0 as Oe,U as Ee,V as Pe,W as N,ad as Re,p as B,t as b,B as Te,ak as Ue,a2 as Se,P as ze,S as Be,aC as Ie,O as Me,l as q,Q as Ve,R as je,m as Ae,q as Ye,s as qe,ae as He,a3 as Ke,a4 as H,a5 as Qe,a6 as Je,ap as We,K as d}from"./index-Dk-eNI3p.js";import{v as Ge}from"./mockData-_Udtor0Z.js";var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 472a40 40 0 1080 0 40 40 0 10-80 0zm367 352.9L696.3 352V178H768v-68H256v68h71.7v174L145 824.9c-2.8 7.4-4.3 15.2-4.3 23.1 0 35.3 28.7 64 64 64h614.6c7.9 0 15.7-1.5 23.1-4.3 33-12.7 49.4-49.8 36.6-82.8zM395.7 364.7V180h232.6v184.7L719.2 600c-20.7-5.3-42.1-8-63.9-8-61.2 0-119.2 21.5-165.3 60a188.78 188.78 0 01-121.3 43.9c-32.7 0-64.1-8.3-91.8-23.7l118.8-307.5zM210.5 844l41.7-107.8c35.7 18.1 75.4 27.8 116.6 27.8 61.2 0 119.2-21.5 165.3-60 33.9-28.2 76.3-43.9 121.3-43.9 35 0 68.4 9.5 97.6 27.1L813.5 844h-603z"}}]},name:"experiment",theme:"outlined"};function K(y){for(var u=1;u<arguments.length;u++){var i=arguments[u]!=null?Object(arguments[u]):{},m=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(i).filter(function(k){return Object.getOwnPropertyDescriptor(i,k).enumerable}))),m.forEach(function(k){Ze(y,k,i[k])})}return y}function Ze(y,u,i){return u in y?Object.defineProperty(y,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):y[u]=i,y}var U=function(u,i){var m=K({},u,i.attrs);return t(he,K({},m,{icon:Xe}),null)};U.displayName="ExperimentOutlined";U.inheritAttrs=!1;const et={class:"fuel-management"},tt={class:"page-header"},at={ref:"trendChart",class:"chart-container"},lt={ref:"compareChart",class:"chart-container"},nt=["onClick"],ot=["onClick"],st=["onClick"],ut=["onClick"],it={__name:"Fuel",setup(y){const u=_(""),i=_([]),m=_(""),k=_(!1),I=_("month"),M=_("consumption"),r=_([]),F=_({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,e)=>`第 ${e[0]}-${e[1]} 条，共 ${l} 条`}),Q=_(Ge),v=_([{id:"FUEL001",vehicleNumber:"京A12345",fuelType:"92号汽油",amount:45.5,cost:350,unitPrice:7.69,consumption:8.5,mileage:12500,station:"中石化加油站",fuelDate:"2024-06-28",key:"FUEL001"},{id:"FUEL002",vehicleNumber:"沪C11111",fuelType:"95号汽油",amount:52,cost:420,unitPrice:8.08,consumption:9.2,mileage:8900,station:"中石油加油站",fuelDate:"2024-06-27",key:"FUEL002"},{id:"FUEL003",vehicleNumber:"粤B88888",fuelType:"柴油",amount:60,cost:380,unitPrice:6.33,consumption:12.5,mileage:15600,station:"壳牌加油站",fuelDate:"2024-06-26",key:"FUEL003"},{id:"FUEL004",vehicleNumber:"川A66666",fuelType:"92号汽油",amount:48,cost:370,unitPrice:7.71,consumption:7.8,mileage:9200,station:"中石化加油站",fuelDate:"2024-06-25",key:"FUEL004"},{id:"FUEL005",vehicleNumber:"鲁D33333",fuelType:"95号汽油",amount:55,cost:450,unitPrice:8.18,consumption:10.1,mileage:11800,station:"中石油加油站",fuelDate:"2024-06-24",key:"FUEL005"}]),O=_({totalRecords:v.value.length,totalLiters:v.value.reduce((l,e)=>l+e.amount,0),totalCost:v.value.reduce((l,e)=>l+e.cost,0),avgConsumption:(v.value.reduce((l,e)=>l+e.consumption,0)/v.value.length).toFixed(1)}),J=[{title:"车牌号",dataIndex:"vehicleNumber",key:"vehicleNumber",width:120},{title:"燃油类型",dataIndex:"fuelType",key:"fuelType",width:100},{title:"加油量",dataIndex:"amount",key:"amount",width:100},{title:"费用",dataIndex:"cost",key:"cost",width:100},{title:"单价",dataIndex:"unitPrice",key:"unitPrice",width:100},{title:"油耗",dataIndex:"consumption",key:"consumption",width:120},{title:"里程",dataIndex:"mileage",key:"mileage",width:100},{title:"加油站",dataIndex:"station",key:"station",width:150},{title:"加油日期",dataIndex:"fuelDate",key:"fuelDate",width:120},{title:"操作",key:"actions",width:200,fixed:"right"}],W=be(()=>{let l=v.value;if(u.value){const e=u.value.toLowerCase();l=l.filter(x=>x.vehicleNumber.toLowerCase().includes(e)||x.station.toLowerCase().includes(e))}if(m.value&&(l=l.filter(e=>e.vehicleNumber===m.value)),i.value&&i.value.length===2){const[e,x]=i.value;l=l.filter(c=>{const E=T(c.fuelDate);return E.isAfter(T(e).subtract(1,"day"))&&E.isBefore(T(x).add(1,"day"))})}return F.value.total=l.length,l}),G=l=>({"92号汽油":"blue","95号汽油":"green","98号汽油":"purple",柴油:"orange"})[l]||"default",X=l=>l?T(l).format("YYYY-MM-DD"):"-",Z=l=>{u.value=l,F.value.current=1},V=()=>{F.value.current=1},ee=()=>{k.value=!0,setTimeout(()=>{k.value=!1,d.success("数据已刷新")},1e3)},te=()=>{d.success("油耗数据导出成功")},ae=()=>{d.info("打开添加加油记录弹窗")},le=l=>{r.value=l},ne=l=>{F.value={...F.value,...l}},oe=l=>{d.info(`查看车辆详情: ${l.vehicleNumber}`)},se=l=>{d.info(`编辑加油记录: ${l.id}`)},ue=l=>{d.info(`查看加油记录: ${l.id}`)},ie=l=>{d.info(`分析车辆 ${l.vehicleNumber} 的油耗数据`)},de=l=>{d.success(`加油记录 ${l.id} 已复制`)},re=l=>{d.success(`车辆 ${l.vehicleNumber} 油耗报告生成成功`)},ce=l=>{d.success(`加油记录 ${l.id} 导出成功`)},_e=l=>{const e=v.value.findIndex(x=>x.id===l.id);e>-1&&(v.value.splice(e,1),d.success("加油记录删除成功"))},fe=()=>{d.info(`批量分析 ${r.value.length} 条记录`),r.value=[]},pe=()=>{d.success(`批量导出 ${r.value.length} 条记录`),r.value=[]},me=()=>{d.success(`批量生成 ${r.value.length} 个油耗报告`),r.value=[]},ve=()=>{v.value=v.value.filter(l=>!r.value.includes(l.key)),d.success(`已删除 ${r.value.length} 条记录`),r.value=[]};return we(()=>{}),(l,e)=>{const x=Le,c=$e,E=Oe,$=Pe,j=Ee,P=Ne,L=Te,S=Fe,h=De,R=Be,z=je,ye=Ve,w=Je,A=Qe,Y=Ke,ge=qe,ke=We,xe=Ae;return p(),C("div",et,[g("div",tt,[g("h1",null,[t(f(U)),e[5]||(e[5]=n(" 油耗管理 "))]),e[6]||(e[6]=g("p",null,"管理车辆油耗数据，分析燃油效率，优化运营成本",-1))]),t(h,{class:"toolbar-card"},{default:a(()=>[t(S,{gutter:[16,16],align:"middle"},{default:a(()=>[t(c,{xs:24,sm:12,md:8},{default:a(()=>[t(x,{value:u.value,"onUpdate:value":e[0]||(e[0]=o=>u.value=o),placeholder:"搜索车牌号、加油站",onSearch:Z,style:{width:"100%"}},null,8,["value"])]),_:1}),t(c,{xs:24,sm:12,md:8},{default:a(()=>[t(P,null,{default:a(()=>[t(E,{value:i.value,"onUpdate:value":e[1]||(e[1]=o=>i.value=o),style:{width:"200px"},onChange:V},null,8,["value"]),t(j,{value:m.value,"onUpdate:value":e[2]||(e[2]=o=>m.value=o),placeholder:"选择车辆",style:{width:"120px"},onChange:V},{default:a(()=>[t($,{value:""},{default:a(()=>e[7]||(e[7]=[n("全部车辆")])),_:1,__:[7]}),(p(!0),C(N,null,Re(Q.value,o=>(p(),B($,{key:o.plateNumber,value:o.plateNumber},{default:a(()=>[n(b(o.plateNumber),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),t(c,{xs:24,sm:24,md:8,class:"text-right"},{default:a(()=>[t(P,null,{default:a(()=>[t(L,{onClick:ee},{default:a(()=>[t(f(Ue)),e[8]||(e[8]=n(" 刷新 "))]),_:1,__:[8]}),t(L,{onClick:te},{default:a(()=>[t(f(Se)),e[9]||(e[9]=n(" 导出 "))]),_:1,__:[9]}),t(L,{type:"primary",onClick:ae},{default:a(()=>[t(f(ze)),e[10]||(e[10]=n(" 添加加油记录 "))]),_:1,__:[10]})]),_:1})]),_:1})]),_:1})]),_:1}),t(S,{gutter:[16,16],class:"stats-cards"},{default:a(()=>[t(c,{xs:24,sm:12,md:6},{default:a(()=>[t(h,{class:"stat-card"},{default:a(()=>[t(R,{title:"总加油次数",value:O.value.totalRecords,"value-style":{color:"#1890ff"}},{prefix:a(()=>[t(f(U))]),_:1},8,["value"])]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:6},{default:a(()=>[t(h,{class:"stat-card"},{default:a(()=>[t(R,{title:"总油耗量",value:O.value.totalLiters,suffix:"升","value-style":{color:"#52c41a"}},{prefix:a(()=>[t(f(Ie))]),_:1},8,["value"])]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:6},{default:a(()=>[t(h,{class:"stat-card"},{default:a(()=>[t(R,{title:"总费用",value:O.value.totalCost,"value-style":{color:"#722ed1"},formatter:o=>`¥${(o/1e4).toFixed(1)}万`},{prefix:a(()=>[t(f(Me))]),_:1},8,["value","formatter"])]),_:1})]),_:1}),t(c,{xs:24,sm:12,md:6},{default:a(()=>[t(h,{class:"stat-card"},{default:a(()=>[t(R,{title:"平均油耗",value:O.value.avgConsumption,suffix:"L/100km","value-style":{color:"#fa8c16"}},{prefix:a(()=>[t(f(q))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(S,{gutter:[16,16],class:"charts-section"},{default:a(()=>[t(c,{xs:24,lg:12},{default:a(()=>[t(h,{title:"月度油耗趋势",class:"chart-card"},{extra:a(()=>[t(ye,{value:I.value,"onUpdate:value":e[3]||(e[3]=o=>I.value=o),size:"small"},{default:a(()=>[t(z,{value:"month"},{default:a(()=>e[11]||(e[11]=[n("月度")])),_:1,__:[11]}),t(z,{value:"quarter"},{default:a(()=>e[12]||(e[12]=[n("季度")])),_:1,__:[12]}),t(z,{value:"year"},{default:a(()=>e[13]||(e[13]=[n("年度")])),_:1,__:[13]})]),_:1},8,["value"])]),default:a(()=>[g("div",at,null,512)]),_:1})]),_:1}),t(c,{xs:24,lg:12},{default:a(()=>[t(h,{title:"车辆油耗对比",class:"chart-card"},{extra:a(()=>[t(j,{value:M.value,"onUpdate:value":e[4]||(e[4]=o=>M.value=o),size:"small",style:{width:"100px"}},{default:a(()=>[t($,{value:"consumption"},{default:a(()=>e[14]||(e[14]=[n("油耗量")])),_:1,__:[14]}),t($,{value:"cost"},{default:a(()=>e[15]||(e[15]=[n("费用")])),_:1,__:[15]}),t($,{value:"efficiency"},{default:a(()=>e[16]||(e[16]=[n("效率")])),_:1,__:[16]})]),_:1},8,["value"])]),default:a(()=>[g("div",lt,null,512)]),_:1})]),_:1})]),_:1}),t(h,{title:"加油记录",class:"fuel-table-card"},{extra:a(()=>[t(P,null,{default:a(()=>[t(L,{size:"small",onClick:fe,disabled:r.value.length===0},{default:a(()=>[t(f(q)),e[17]||(e[17]=n(" 批量分析 "))]),_:1,__:[17]},8,["disabled"]),t(Y,null,{overlay:a(()=>[t(A,null,{default:a(()=>[t(w,{key:"1",onClick:pe},{default:a(()=>e[19]||(e[19]=[n("批量导出")])),_:1,__:[19]}),t(w,{key:"2",onClick:me},{default:a(()=>e[20]||(e[20]=[n("生成报告")])),_:1,__:[20]}),t(w,{key:"3",onClick:ve},{default:a(()=>e[21]||(e[21]=[n("批量删除")])),_:1,__:[21]})]),_:1})]),default:a(()=>[t(L,{size:"small"},{default:a(()=>[e[18]||(e[18]=n(" 更多操作 ")),t(f(H))]),_:1,__:[18]})]),_:1})]),_:1})]),default:a(()=>[t(xe,{columns:J,"data-source":W.value,pagination:F.value,loading:k.value,"row-selection":{selectedRowKeys:r.value,onChange:le},onChange:ne,size:"small",bordered:""},{bodyCell:a(({column:o,record:s})=>[o.key==="vehicleNumber"?(p(),C("a",{key:0,onClick:D=>oe(s)},b(s.vehicleNumber),9,nt)):o.key==="fuelType"?(p(),B(ge,{key:1,color:G(s.fuelType)},{default:a(()=>[n(b(s.fuelType),1)]),_:2},1032,["color"])):o.key==="amount"?(p(),C(N,{key:2},[n(b(s.amount.toFixed(2))+"升 ",1)],64)):o.key==="cost"?(p(),C(N,{key:3},[n(" ¥"+b(s.cost.toLocaleString()),1)],64)):o.key==="unitPrice"?(p(),C(N,{key:4},[n(" ¥"+b(s.unitPrice.toFixed(2))+"/升 ",1)],64)):o.key==="consumption"?(p(),C("span",{key:5,class:He({"text-success":s.consumption<=8,"text-warning":s.consumption>8&&s.consumption<=12,"text-danger":s.consumption>12})},b(s.consumption.toFixed(1))+"L/100km ",3)):o.key==="fuelDate"?(p(),C(N,{key:6},[n(b(X(s.fuelDate)),1)],64)):o.key==="actions"?(p(),B(P,{key:7},{default:a(()=>[g("a",{onClick:D=>se(s)},"编辑",8,ot),g("a",{onClick:D=>ue(s)},"查看",8,st),g("a",{onClick:D=>ie(s)},"分析",8,ut),t(Y,null,{overlay:a(()=>[t(A,null,{default:a(()=>[t(w,{key:"1",onClick:D=>de(s)},{default:a(()=>e[23]||(e[23]=[n("复制记录")])),_:2,__:[23]},1032,["onClick"]),t(w,{key:"2",onClick:D=>re(s)},{default:a(()=>e[24]||(e[24]=[n("生成报告")])),_:2,__:[24]},1032,["onClick"]),t(w,{key:"3",onClick:D=>ce(s)},{default:a(()=>e[25]||(e[25]=[n("导出记录")])),_:2,__:[25]},1032,["onClick"]),t(ke),t(w,{key:"4",onClick:D=>_e(s),style:{color:"#ff4d4f"}},{default:a(()=>e[26]||(e[26]=[n("删除记录")])),_:2,__:[26]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[g("a",null,[e[22]||(e[22]=n(" 更多 ")),t(f(H))])]),_:2},1024)]),_:2},1024)):Ye("",!0)]),_:1},8,["data-source","pagination","loading","row-selection"])]),_:1})])}}},ct=Ce(it,[["__scopeId","data-v-c0f1bafe"]]);export{ct as default};
