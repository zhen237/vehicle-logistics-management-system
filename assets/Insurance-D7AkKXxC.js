import{c as t,I as he,_ as Se,r as x,a7 as K,a8 as f,o as $e,a as $,b as g,p as A,q as E,k as n,g as c,aA as q,w as l,C as Oe,d as Le,e as y,f as Be,aj as Me,j as Ae,U as ze,V as Pe,B as Ye,ak as Ee,a2 as Re,P as je,S as Te,ao as Ve,aB as J,O as Fe,L as Ue,x as He,y as Ke,t as p,s as qe,A as Je,z as Qe,m as We,W as Q,ae as Ge,a3 as Xe,a4 as W,a5 as Ze,a6 as et,ap as tt,K as i}from"./index-BK7oz1s9.js";var at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};function G(k){for(var u=1;u<arguments.length;u++){var r=arguments[u]!=null?Object(arguments[u]):{},m=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(r).filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable}))),m.forEach(function(C){lt(k,C,r[C])})}return k}function lt(k,u,r){return u in k?Object.defineProperty(k,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):k[u]=r,k}var R=function(u,r){var m=G({},u,r.attrs);return t(he,G({},m,{icon:at}),null)};R.displayName="SyncOutlined";R.inheritAttrs=!1;const nt={class:"insurance-management"},st={class:"page-header"},ot=["onClick"],ut=["onClick"],it=["onClick"],rt=["onClick"],dt=["onClick"],ct=["onClick"],_t={__name:"Insurance",setup(k){const u=x(""),r=x(""),m=x(""),C=x(!1),d=x([]),h=x({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,e)=>`第 ${e[0]}-${e[1]} 条，共 ${a} 条`}),_=x([{id:"INS001",vehicleNumber:"京A12345",type:"交强险",company:"中国人保",policyNumber:"PICC2024001",premium:950,startDate:"2024-01-01",endDate:"2024-12-31",status:"有效",key:"INS001"},{id:"INS002",vehicleNumber:"京A12345",type:"商业险",company:"中国人保",policyNumber:"PICC2024002",premium:3200,startDate:"2024-01-01",endDate:"2024-12-31",status:"有效",key:"INS002"},{id:"INS003",vehicleNumber:"沪C11111",type:"交强险",company:"平安保险",policyNumber:"PA2024001",premium:950,startDate:"2024-02-15",endDate:"2025-02-14",status:"有效",key:"INS003"},{id:"INS004",vehicleNumber:"粤B88888",type:"交强险",company:"太平洋保险",policyNumber:"CPIC2024001",premium:950,startDate:"2023-12-01",endDate:"2024-11-30",status:"即将到期",key:"INS004"},{id:"INS005",vehicleNumber:"川A66666",type:"商业险",company:"中国人寿",policyNumber:"CHINALIFE2024001",premium:2800,startDate:"2024-03-01",endDate:"2025-02-28",status:"有效",key:"INS005"}]),O=x({total:_.value.length,active:_.value.filter(a=>a.status==="有效").length,expiringSoon:_.value.filter(a=>a.status==="即将到期").length,totalCost:_.value.reduce((a,e)=>a+e.premium,0)}),z=K(()=>_.value.filter(a=>f(a.endDate).diff(f(),"day")<=30).map(a=>({...a,daysLeft:f(a.endDate).diff(f(),"day")})).sort((a,e)=>a.daysLeft-e.daysLeft)),X=[{title:"车牌号",dataIndex:"vehicleNumber",key:"vehicleNumber",width:120},{title:"保险类型",dataIndex:"type",key:"type",width:120},{title:"保险公司",dataIndex:"company",key:"company",width:150},{title:"保单号",dataIndex:"policyNumber",key:"policyNumber",width:150},{title:"保费",dataIndex:"premium",key:"premium",width:100},{title:"生效日期",dataIndex:"startDate",key:"startDate",width:120},{title:"到期日期",dataIndex:"endDate",key:"endDate",width:120},{title:"状态",dataIndex:"status",key:"status",width:100},{title:"操作",key:"actions",width:200,fixed:"right"}],Z=K(()=>{let a=_.value;if(u.value){const e=u.value.toLowerCase();a=a.filter(b=>b.vehicleNumber.toLowerCase().includes(e)||b.company.toLowerCase().includes(e))}return r.value&&(a=a.filter(e=>e.type===r.value)),m.value&&(a=a.filter(e=>e.status===m.value)),h.value.total=a.length,a}),ee=a=>({交强险:"red",商业险:"blue",第三者责任险:"green",车损险:"orange"})[a]||"default",te=a=>({有效:"green",即将到期:"orange",已到期:"red",已失效:"default"})[a]||"default",P=a=>a?f(a).format("YYYY-MM-DD"):"-",ae=a=>{if(!a)return!1;const e=f(a).diff(f(),"day");return e<=30&&e>0},le=a=>a?f(a).isBefore(f()):!1,ne=a=>{u.value=a,h.value.current=1},j=()=>{h.value.current=1},se=()=>{C.value=!0,setTimeout(()=>{C.value=!1,i.success("数据已刷新")},1e3)},oe=()=>{i.success("保险数据导出成功")},ue=()=>{i.info("打开新增保险弹窗")},ie=a=>{d.value=a},re=a=>{h.value={...h.value,...a}},L=a=>{a.status="有效",a.startDate=f().format("YYYY-MM-DD"),a.endDate=f().add(1,"year").format("YYYY-MM-DD"),i.success(`保险 ${a.policyNumber} 续保成功`)},T=a=>{i.info(`查看保险详情: ${a.policyNumber}`)},de=()=>{z.value.forEach(a=>{L(a)}),i.success("批量续保完成")},ce=a=>{i.info(`查看车辆详情: ${a.vehicleNumber}`)},_e=a=>{i.info(`编辑保险: ${a.policyNumber}`)},fe=a=>{i.success(`保单 ${a.policyNumber} 下载成功`)},pe=a=>{i.success(`已发送续保提醒: ${a.policyNumber}`)},me=a=>{i.info(`查看理赔记录: ${a.policyNumber}`)},ve=a=>{const e=_.value.findIndex(b=>b.id===a.id);e>-1&&(_.value.splice(e,1),i.success("保险记录删除成功"))},ye=()=>{d.value.forEach(a=>{const e=_.value.find(b=>b.key===a);e&&L(e)}),i.success(`已续保 ${d.value.length} 个保险`),d.value=[]},ke=()=>{i.success(`批量导出 ${d.value.length} 个保险记录`),d.value=[]},ge=()=>{i.success(`已发送 ${d.value.length} 个续保提醒`),d.value=[]},Ce=()=>{_.value=_.value.filter(a=>!d.value.includes(a.key)),i.success(`已删除 ${d.value.length} 个保险记录`),d.value=[]};return $e(()=>{}),(a,e)=>{const b=Me,w=Be,v=Pe,V=ze,B=Ae,S=Ye,F=Le,N=Oe,M=Te,be=Je,Y=qe,xe=Ke,we=He,Ne=Ue,D=et,U=Ze,H=Xe,De=tt,Ie=We;return y(),$("div",nt,[g("div",st,[g("h1",null,[t(c(q)),e[3]||(e[3]=n(" 保险管理 "))]),e[4]||(e[4]=g("p",null,"管理车辆保险信息，及时续保，确保车辆合规运营",-1))]),t(N,{class:"toolbar-card"},{default:l(()=>[t(F,{gutter:[16,16],align:"middle"},{default:l(()=>[t(w,{xs:24,sm:12,md:8},{default:l(()=>[t(b,{value:u.value,"onUpdate:value":e[0]||(e[0]=s=>u.value=s),placeholder:"搜索车牌号、保险公司",onSearch:ne,style:{width:"100%"}},null,8,["value"])]),_:1}),t(w,{xs:24,sm:12,md:8},{default:l(()=>[t(B,null,{default:l(()=>[t(V,{value:r.value,"onUpdate:value":e[1]||(e[1]=s=>r.value=s),placeholder:"保险类型",style:{width:"120px"},onChange:j},{default:l(()=>[t(v,{value:""},{default:l(()=>e[5]||(e[5]=[n("全部类型")])),_:1,__:[5]}),t(v,{value:"交强险"},{default:l(()=>e[6]||(e[6]=[n("交强险")])),_:1,__:[6]}),t(v,{value:"商业险"},{default:l(()=>e[7]||(e[7]=[n("商业险")])),_:1,__:[7]}),t(v,{value:"第三者责任险"},{default:l(()=>e[8]||(e[8]=[n("第三者责任险")])),_:1,__:[8]}),t(v,{value:"车损险"},{default:l(()=>e[9]||(e[9]=[n("车损险")])),_:1,__:[9]})]),_:1},8,["value"]),t(V,{value:m.value,"onUpdate:value":e[2]||(e[2]=s=>m.value=s),placeholder:"保险状态",style:{width:"120px"},onChange:j},{default:l(()=>[t(v,{value:""},{default:l(()=>e[10]||(e[10]=[n("全部状态")])),_:1,__:[10]}),t(v,{value:"有效"},{default:l(()=>e[11]||(e[11]=[n("有效")])),_:1,__:[11]}),t(v,{value:"即将到期"},{default:l(()=>e[12]||(e[12]=[n("即将到期")])),_:1,__:[12]}),t(v,{value:"已到期"},{default:l(()=>e[13]||(e[13]=[n("已到期")])),_:1,__:[13]}),t(v,{value:"已失效"},{default:l(()=>e[14]||(e[14]=[n("已失效")])),_:1,__:[14]})]),_:1},8,["value"])]),_:1})]),_:1}),t(w,{xs:24,sm:24,md:8,class:"text-right"},{default:l(()=>[t(B,null,{default:l(()=>[t(S,{onClick:se},{default:l(()=>[t(c(Ee)),e[15]||(e[15]=n(" 刷新 "))]),_:1,__:[15]}),t(S,{onClick:oe},{default:l(()=>[t(c(Re)),e[16]||(e[16]=n(" 导出 "))]),_:1,__:[16]}),t(S,{type:"primary",onClick:ue},{default:l(()=>[t(c(je)),e[17]||(e[17]=n(" 新增保险 "))]),_:1,__:[17]})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,{gutter:[16,16],class:"stats-cards"},{default:l(()=>[t(w,{xs:24,sm:12,md:6},{default:l(()=>[t(N,{class:"stat-card"},{default:l(()=>[t(M,{title:"总保险数",value:O.value.total,"value-style":{color:"#1890ff"}},{prefix:l(()=>[t(c(q))]),_:1},8,["value"])]),_:1})]),_:1}),t(w,{xs:24,sm:12,md:6},{default:l(()=>[t(N,{class:"stat-card"},{default:l(()=>[t(M,{title:"有效保险",value:O.value.active,"value-style":{color:"#52c41a"}},{prefix:l(()=>[t(c(Ve))]),_:1},8,["value"])]),_:1})]),_:1}),t(w,{xs:24,sm:12,md:6},{default:l(()=>[t(N,{class:"stat-card"},{default:l(()=>[t(M,{title:"即将到期",value:O.value.expiringSoon,"value-style":{color:"#fa8c16"}},{prefix:l(()=>[t(c(J))]),_:1},8,["value"])]),_:1})]),_:1}),t(w,{xs:24,sm:12,md:6},{default:l(()=>[t(N,{class:"stat-card"},{default:l(()=>[t(M,{title:"保险费用",value:O.value.totalCost,"value-style":{color:"#722ed1"},formatter:s=>`¥${(s/1e4).toFixed(1)}万`},{prefix:l(()=>[t(c(Fe))]),_:1},8,["value","formatter"])]),_:1})]),_:1})]),_:1}),z.value.length>0?(y(),A(N,{key:0,title:"到期提醒",class:"reminder-card"},{extra:l(()=>[t(S,{size:"small",onClick:de},{default:l(()=>e[18]||(e[18]=[n(" 批量续保 ")])),_:1,__:[18]})]),default:l(()=>[t(Ne,{"data-source":z.value,size:"small"},{renderItem:l(({item:s})=>[t(we,null,{actions:l(()=>[g("a",{onClick:o=>L(s)},"续保",8,ot),g("a",{onClick:o=>T(s)},"查看",8,ut)]),default:l(()=>[t(xe,null,{avatar:l(()=>[t(be,{style:Qe({backgroundColor:s.daysLeft<=7?"#ff4d4f":"#faad14"})},{default:l(()=>[t(c(J))]),_:2},1032,["style"])]),title:l(()=>[g("span",null,p(s.vehicleNumber)+" - "+p(s.type),1),t(Y,{color:s.daysLeft<=7?"red":"orange",class:"ml-2"},{default:l(()=>[n(p(s.daysLeft<=0?"已到期":`${s.daysLeft}天后到期`),1)]),_:2},1032,["color"])]),description:l(()=>[n(" 保险公司："+p(s.company)+" | 到期日期："+p(P(s.endDate)),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})):E("",!0),t(N,{title:"保险列表",class:"insurance-table-card"},{extra:l(()=>[t(B,null,{default:l(()=>[t(S,{size:"small",onClick:ye,disabled:d.value.length===0},{default:l(()=>[t(c(R)),e[19]||(e[19]=n(" 批量续保 "))]),_:1,__:[19]},8,["disabled"]),t(H,null,{overlay:l(()=>[t(U,null,{default:l(()=>[t(D,{key:"1",onClick:ke},{default:l(()=>e[21]||(e[21]=[n("批量导出")])),_:1,__:[21]}),t(D,{key:"2",onClick:ge},{default:l(()=>e[22]||(e[22]=[n("批量提醒")])),_:1,__:[22]}),t(D,{key:"3",onClick:Ce},{default:l(()=>e[23]||(e[23]=[n("批量删除")])),_:1,__:[23]})]),_:1})]),default:l(()=>[t(S,{size:"small"},{default:l(()=>[e[20]||(e[20]=n(" 更多操作 ")),t(c(W))]),_:1,__:[20]})]),_:1})]),_:1})]),default:l(()=>[t(Ie,{columns:X,"data-source":Z.value,pagination:h.value,loading:C.value,"row-selection":{selectedRowKeys:d.value,onChange:ie},onChange:re,size:"small",bordered:""},{bodyCell:l(({column:s,record:o})=>[s.key==="vehicleNumber"?(y(),$("a",{key:0,onClick:I=>ce(o)},p(o.vehicleNumber),9,it)):s.key==="type"?(y(),A(Y,{key:1,color:ee(o.type)},{default:l(()=>[n(p(o.type),1)]),_:2},1032,["color"])):s.key==="status"?(y(),A(Y,{key:2,color:te(o.status)},{default:l(()=>[n(p(o.status),1)]),_:2},1032,["color"])):s.key==="premium"?(y(),$(Q,{key:3},[n(" ¥"+p(o.premium.toLocaleString()),1)],64)):s.key==="startDate"?(y(),$(Q,{key:4},[n(p(P(o.startDate)),1)],64)):s.key==="endDate"?(y(),$("span",{key:5,class:Ge({"text-warning":ae(o.endDate),"text-danger":le(o.endDate)})},p(P(o.endDate)),3)):s.key==="actions"?(y(),A(B,{key:6},{default:l(()=>[g("a",{onClick:I=>_e(o)},"编辑",8,rt),o.status!=="有效"?(y(),$("a",{key:0,onClick:I=>L(o)},"续保",8,dt)):E("",!0),g("a",{onClick:I=>T(o)},"查看",8,ct),t(H,null,{overlay:l(()=>[t(U,null,{default:l(()=>[t(D,{key:"1",onClick:I=>fe(o)},{default:l(()=>e[25]||(e[25]=[n("下载保单")])),_:2,__:[25]},1032,["onClick"]),t(D,{key:"2",onClick:I=>pe(o)},{default:l(()=>e[26]||(e[26]=[n("发送提醒")])),_:2,__:[26]},1032,["onClick"]),t(D,{key:"3",onClick:I=>me(o)},{default:l(()=>e[27]||(e[27]=[n("理赔记录")])),_:2,__:[27]},1032,["onClick"]),t(De),t(D,{key:"4",onClick:I=>ve(o),style:{color:"#ff4d4f"}},{default:l(()=>e[28]||(e[28]=[n("删除保险")])),_:2,__:[28]},1032,["onClick"])]),_:2},1024)]),default:l(()=>[g("a",null,[e[24]||(e[24]=n(" 更多 ")),t(c(W))])]),_:2},1024)]),_:2},1024)):E("",!0)]),_:1},8,["data-source","pagination","loading","row-selection"])]),_:1})])}}},pt=Se(_t,[["__scopeId","data-v-af38f3b5"]]);export{pt as default};
