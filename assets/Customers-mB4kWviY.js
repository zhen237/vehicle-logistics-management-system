import{_ as me,r,a7 as ve,o as fe,a as A,b as c,c as t,k as n,g as i,av as V,w as a,C as pe,d as ke,e as k,f as ye,aj as Ce,j as ge,U as we,V as xe,B as Ae,ak as $e,a2 as he,P as Oe,S as De,T as Be,O as Se,m as Te,p as K,q as be,t as $,s as Ie,W as I,v as Le,a3 as Me,a4 as N,a5 as Ye,a6 as Ue,ap as ze,K as s,a8 as Ve}from"./index-BK7oz1s9.js";import{c as T}from"./mockData-_Udtor0Z.js";import{U as Ke}from"./UserAddOutlined-Bw9b1CUG.js";import{P as Ne}from"./PhoneOutlined-D7NfKM0I.js";const Pe={class:"customers-management"},Re={class:"page-header"},je=["onClick"],Ee={class:"ml-1"},Fe=["onClick"],qe=["onClick"],Je=["onClick"],Qe={__name:"Customers",setup(We){const g=r(""),h=r(""),O=r(""),b=r(!1),d=r([]),y=r({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,e)=>`第 ${e[0]}-${e[1]} 条，共 ${l} 条`}),D=r({total:T.length,active:T.filter(l=>l.lastOrderDate>="2024-06-01").length,newThisMonth:8,totalAmount:T.reduce((l,e)=>l+e.totalAmount,0)}),w=r(T.map(l=>({...l,key:l.id}))),P=[{title:"客户名称",dataIndex:"name",key:"name",width:200},{title:"客户类型",dataIndex:"type",key:"type",width:120},{title:"联系人",dataIndex:"contact",key:"contact",width:100},{title:"联系电话",dataIndex:"phone",key:"phone",width:130},{title:"信用等级",dataIndex:"creditLevel",key:"creditLevel",width:100},{title:"合作年限",dataIndex:"cooperationYears",key:"cooperationYears",width:120},{title:"订单总数",dataIndex:"totalOrders",key:"totalOrders",width:100},{title:"交易总额",dataIndex:"totalAmount",key:"totalAmount",width:120},{title:"最后订单",dataIndex:"lastOrderDate",key:"lastOrderDate",width:120},{title:"操作",key:"actions",width:200,fixed:"right"}],R=ve(()=>{let l=w.value;if(g.value){const e=g.value.toLowerCase();l=l.filter(m=>m.name.toLowerCase().includes(e)||m.contact.toLowerCase().includes(e)||m.phone.includes(e))}return h.value&&(l=l.filter(e=>e.type===h.value)),O.value&&(l=l.filter(e=>e.creditLevel===O.value)),y.value.total=l.length,l}),j=l=>({AAA:"gold",AA:"green",A:"blue",B:"orange"})[l]||"default",E=l=>Ve(l).format("YYYY-MM-DD"),F=l=>{g.value=l,y.value.current=1},L=()=>{y.value.current=1},q=()=>{b.value=!0,setTimeout(()=>{b.value=!1,s.success("数据已刷新")},1e3)},J=()=>{s.success("客户数据导出成功")},Q=()=>{s.info("打开新增客户弹窗")},W=l=>{d.value=l},G=l=>{y.value={...y.value,...l}},H=l=>{s.info(`查看客户详情: ${l.name}`)},X=l=>{s.info(`编辑客户: ${l.name}`)},Z=l=>{s.info(`联系客户: ${l.name} (${l.phone})`)},ee=l=>{s.info(`查看客户 ${l.name} 的订单记录`)},te=l=>{s.info(`查看客户 ${l.name} 的合同记录`)},ae=l=>{s.info(`为客户 ${l.name} 添加标签`)},le=l=>{s.success(`客户 ${l.name} 信息导出成功`)},ne=l=>{const e=w.value.findIndex(m=>m.id===l.id);e>-1&&(w.value.splice(e,1),s.success("客户删除成功"))},oe=()=>{s.info(`批量联系 ${d.value.length} 个客户`),d.value=[]},se=()=>{s.info(`为 ${d.value.length} 个客户添加标签`),d.value=[]},ue=()=>{s.success(`批量导出 ${d.value.length} 个客户信息`),d.value=[]},de=()=>{w.value=w.value.filter(l=>!d.value.includes(l.key)),s.success(`已删除 ${d.value.length} 个客户`),d.value=[]};return fe(()=>{}),(l,e)=>{const m=Ce,v=ye,_=xe,M=we,B=ge,x=Ae,Y=ke,C=pe,S=De,f=Ue,U=Ye,z=Me,ie=Ie,_e=Le,re=ze,ce=Te;return k(),A("div",Pe,[c("div",Re,[c("h1",null,[t(i(V)),e[3]||(e[3]=n(" 客户管理 "))]),e[4]||(e[4]=c("p",null,"管理客户信息，维护客户关系，提升服务质量",-1))]),t(C,{class:"toolbar-card"},{default:a(()=>[t(Y,{gutter:[16,16],align:"middle"},{default:a(()=>[t(v,{xs:24,sm:12,md:8},{default:a(()=>[t(m,{value:g.value,"onUpdate:value":e[0]||(e[0]=u=>g.value=u),placeholder:"搜索客户名称、联系人、电话",onSearch:F,style:{width:"100%"}},null,8,["value"])]),_:1}),t(v,{xs:24,sm:12,md:8},{default:a(()=>[t(B,null,{default:a(()=>[t(M,{value:h.value,"onUpdate:value":e[1]||(e[1]=u=>h.value=u),placeholder:"客户类型",style:{width:"120px"},onChange:L},{default:a(()=>[t(_,{value:""},{default:a(()=>e[5]||(e[5]=[n("全部类型")])),_:1,__:[5]}),t(_,{value:"零售连锁"},{default:a(()=>e[6]||(e[6]=[n("零售连锁")])),_:1,__:[6]}),t(_,{value:"物流公司"},{default:a(()=>e[7]||(e[7]=[n("物流公司")])),_:1,__:[7]}),t(_,{value:"制造企业"},{default:a(()=>e[8]||(e[8]=[n("制造企业")])),_:1,__:[8]}),t(_,{value:"其他"},{default:a(()=>e[9]||(e[9]=[n("其他")])),_:1,__:[9]})]),_:1},8,["value"]),t(M,{value:O.value,"onUpdate:value":e[2]||(e[2]=u=>O.value=u),placeholder:"信用等级",style:{width:"120px"},onChange:L},{default:a(()=>[t(_,{value:""},{default:a(()=>e[10]||(e[10]=[n("全部等级")])),_:1,__:[10]}),t(_,{value:"AAA"},{default:a(()=>e[11]||(e[11]=[n("AAA级")])),_:1,__:[11]}),t(_,{value:"AA"},{default:a(()=>e[12]||(e[12]=[n("AA级")])),_:1,__:[12]}),t(_,{value:"A"},{default:a(()=>e[13]||(e[13]=[n("A级")])),_:1,__:[13]}),t(_,{value:"B"},{default:a(()=>e[14]||(e[14]=[n("B级")])),_:1,__:[14]})]),_:1},8,["value"])]),_:1})]),_:1}),t(v,{xs:24,sm:24,md:8,class:"text-right"},{default:a(()=>[t(B,null,{default:a(()=>[t(x,{onClick:q},{default:a(()=>[t(i($e)),e[15]||(e[15]=n(" 刷新 "))]),_:1,__:[15]}),t(x,{onClick:J},{default:a(()=>[t(i(he)),e[16]||(e[16]=n(" 导出 "))]),_:1,__:[16]}),t(x,{type:"primary",onClick:Q},{default:a(()=>[t(i(Oe)),e[17]||(e[17]=n(" 新增客户 "))]),_:1,__:[17]})]),_:1})]),_:1})]),_:1})]),_:1}),t(Y,{gutter:[16,16],class:"stats-cards"},{default:a(()=>[t(v,{xs:24,sm:12,md:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[t(S,{title:"总客户数",value:D.value.total,"value-style":{color:"#1890ff"}},{prefix:a(()=>[t(i(V))]),_:1},8,["value"])]),_:1})]),_:1}),t(v,{xs:24,sm:12,md:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[t(S,{title:"活跃客户",value:D.value.active,"value-style":{color:"#52c41a"}},{prefix:a(()=>[t(i(Be))]),_:1},8,["value"])]),_:1})]),_:1}),t(v,{xs:24,sm:12,md:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[t(S,{title:"本月新增",value:D.value.newThisMonth,"value-style":{color:"#722ed1"}},{prefix:a(()=>[t(i(Ke))]),_:1},8,["value"])]),_:1})]),_:1}),t(v,{xs:24,sm:12,md:6},{default:a(()=>[t(C,{class:"stat-card"},{default:a(()=>[t(S,{title:"总交易额",value:D.value.totalAmount,"value-style":{color:"#fa8c16"},formatter:u=>`¥${(u/1e4).toFixed(0)}万`},{prefix:a(()=>[t(i(Se))]),_:1},8,["value","formatter"])]),_:1})]),_:1})]),_:1}),t(C,{title:"客户列表",class:"customers-table-card"},{extra:a(()=>[t(B,null,{default:a(()=>[t(x,{size:"small",onClick:oe,disabled:d.value.length===0},{default:a(()=>[t(i(Ne)),e[18]||(e[18]=n(" 批量联系 "))]),_:1,__:[18]},8,["disabled"]),t(z,null,{overlay:a(()=>[t(U,null,{default:a(()=>[t(f,{key:"1",onClick:se},{default:a(()=>e[20]||(e[20]=[n("批量标签")])),_:1,__:[20]}),t(f,{key:"2",onClick:ue},{default:a(()=>e[21]||(e[21]=[n("批量导出")])),_:1,__:[21]}),t(f,{key:"3",onClick:de},{default:a(()=>e[22]||(e[22]=[n("批量删除")])),_:1,__:[22]})]),_:1})]),default:a(()=>[t(x,{size:"small"},{default:a(()=>[e[19]||(e[19]=n(" 更多操作 ")),t(i(N))]),_:1,__:[19]})]),_:1})]),_:1})]),default:a(()=>[t(ce,{columns:P,"data-source":R.value,pagination:y.value,loading:b.value,"row-selection":{selectedRowKeys:d.value,onChange:W},onChange:G,size:"small",bordered:""},{bodyCell:a(({column:u,record:o})=>[u.key==="name"?(k(),A("a",{key:0,onClick:p=>H(o)},$(o.name),9,je)):u.key==="creditLevel"?(k(),K(ie,{key:1,color:j(o.creditLevel)},{default:a(()=>[n($(o.creditLevel),1)]),_:2},1032,["color"])):u.key==="totalAmount"?(k(),A(I,{key:2},[n(" ¥"+$(o.totalAmount.toLocaleString()),1)],64)):u.key==="cooperationYears"?(k(),A(I,{key:3},[t(_e,{percent:Math.min(o.cooperationYears/10*100,100),size:"small","show-info":!1},null,8,["percent"]),c("span",Ee,$(o.cooperationYears)+"年",1)],64)):u.key==="lastOrderDate"?(k(),A(I,{key:4},[n($(E(o.lastOrderDate)),1)],64)):u.key==="actions"?(k(),K(B,{key:5},{default:a(()=>[c("a",{onClick:p=>X(o)},"编辑",8,Fe),c("a",{onClick:p=>Z(o)},"联系",8,qe),c("a",{onClick:p=>ee(o)},"订单",8,Je),t(z,null,{overlay:a(()=>[t(U,null,{default:a(()=>[t(f,{key:"1",onClick:p=>te(o)},{default:a(()=>e[24]||(e[24]=[n("查看合同")])),_:2,__:[24]},1032,["onClick"]),t(f,{key:"2",onClick:p=>ae(o)},{default:a(()=>e[25]||(e[25]=[n("添加标签")])),_:2,__:[25]},1032,["onClick"]),t(f,{key:"3",onClick:p=>le(o)},{default:a(()=>e[26]||(e[26]=[n("导出信息")])),_:2,__:[26]},1032,["onClick"]),t(re),t(f,{key:"4",onClick:p=>ne(o),style:{color:"#ff4d4f"}},{default:a(()=>e[27]||(e[27]=[n("删除客户")])),_:2,__:[27]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[c("a",null,[e[23]||(e[23]=n(" 更多 ")),t(i(N))])]),_:2},1024)]),_:2},1024)):be("",!0)]),_:1},8,["data-source","pagination","loading","row-selection"])]),_:1})])}}},et=me(Qe,[["__scopeId","data-v-99639249"]]);export{et as default};
